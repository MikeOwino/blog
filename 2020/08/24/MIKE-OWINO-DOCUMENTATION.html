<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Mike Owino Documentation | MikeOwino Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Mike Owino Documentation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My easy to use blogging platform." />
<meta property="og:description" content="My easy to use blogging platform." />
<link rel="canonical" href="https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html" />
<meta property="og:url" content="https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html" />
<meta property="og:site_name" content="MikeOwino Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-08-24T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2020-08-24T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html"},"description":"My easy to use blogging platform.","@type":"BlogPosting","url":"https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html","headline":"Mike Owino Documentation","dateModified":"2020-08-24T00:00:00-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://mikeowino.com/blog/feed.xml" title="MikeOwino Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57531313-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Mike Owino Documentation | MikeOwino Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Mike Owino Documentation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My easy to use blogging platform." />
<meta property="og:description" content="My easy to use blogging platform." />
<link rel="canonical" href="https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html" />
<meta property="og:url" content="https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html" />
<meta property="og:site_name" content="MikeOwino Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-08-24T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2020-08-24T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html"},"description":"My easy to use blogging platform.","@type":"BlogPosting","url":"https://mikeowino.com/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html","headline":"Mike Owino Documentation","dateModified":"2020-08-24T00:00:00-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://mikeowino.com/blog/feed.xml" title="MikeOwino Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57531313-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>



<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">MikeOwino Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Mike Owino Documentation</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-08-24T00:00:00-05:00" itemprop="datePublished">
        Aug 24, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      40 min read
    
</span></p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image1.jpeg" alt="C:\Users\DMUGO\Pictures\download (1).jpg" /></p>

<p>DEDAN KIMATHI UNIVERSITY OF TECHNOLOGY</p>

<p>SCHOOL OF COMPUTER SCIENCE AND INFORMATION TECHNOLOGY</p>

<p>DEPARTMENT OF INFORMATION TECHNOLOGY</p>

<p>A PROJECT PROPOSAL FOR THE FINAL YEAR STUDENT IN BSc BUSINESS INFORMATION TECHNOLOGY</p>

<p>PROJECT TITLE: COVIDLY</p>

<p>SUBMITTED BY</p>

<p>NAME: OWINO MIKE OKUMU</p>

<p>REG.NO: C027-01-1110/2017</p>

<p>SUPERVISOR</p>

<p>MR. MICHAEL KAGIRI</p>

<p><strong>A project submitted in partial fulfillment of the requirements for the degree in Business</strong></p>

<p><strong>Information Technology to the Department of Computer Science and</strong></p>

<p><strong>Information Technology.</strong></p>

<h1 id="declaration">DECLARATION</h1>

<p>I hereby declare that the project entitled COVIDLY submitted for the B.Sc. Business Information Technology degree is my original work and the project has not formed the basis for an award of any degree, diploma or any other similar titles.</p>

<blockquote>
  <p>Name: OWINO MIKE OKUMU</p>

  <p>Signature ………………………………..</p>

  <p>Date: …………………………………… <span class="underline"> </span></p>
</blockquote>

<p>This project has been submitted for examination with my approval as a University Supervisor. Name MR. MICHAEL KAGIRI.</p>

<blockquote>
  <p>Signature ………………………………</p>

  <p>Date: ……………………………………</p>
</blockquote>

<h1 id="dedication">DEDICATION</h1>

<p>I dedicate this project to my father, Alfred Okumu for his financial support and constant encouragement throughout my education and paving for me to do this course. I also dedicate it to my family members who has been of constant help during my way Degree program. God bless them abundantly.</p>

<h1 id="acknoledgement">ACKNOLEDGEMENT</h1>

<p>I would like to express my very great appreciation to Mr. Kagiri Michael for his valuable and constructive guidance during the entire development of this research work. His willingness to give his time so generously is much appreciated.</p>

<p>I would also like to express my gratitude to Mrs. Kuria Jane for her advice and assistance in moderating my research proposal.</p>

<p>I would like to acknowledge the role played by the department of Information Technology as well as all my lecturers in the B.Sc. Business Information Technology degree program.</p>

<p>I am particularly grateful to Mrs. Ndunge Elizabeth who tutored Research Methods, a subject that did helped a lot in this research.</p>

<p>I also acknowledge the help from all my classmates, specifically Nicholas, Denis, Jennifer among others. Finally, I wish to thank my family and friends for their support and encouragement throughout my study. God bless.</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<p>#</p>

<h1 id="abstract">ABSTRACT</h1>

<p>In early December 2019, an outbreak of coronavirus disease 2019 (COVID-19)(Organization &amp; others, 2020), caused by a novel severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).</p>

<p>It occurred in Wuhan City, Hubei Province, China. On January 30, 2020, the World Health Organization declared the outbreak as a Public Health Emergency of International Concern. As of February 14, 2020, 49,053 laboratory-confirmed and 1,381(Worldometers, 2020) deaths have been reported globally.</p>

<p>Perceived risk of acquiring disease has led to many governments to institute a variety of control measures of reducing the spread of the virus and ways of ensuring that their citizens are well equipped with the required information about the virus.</p>

<p>The project aims to reduce the burden on the head of going to a website in search of the covid cases by developing a convincing Chabot where that information can be easily accessed.</p>

<p>A suitable algorithm is devised to search through the set of data and find a potential number. The program then replies to the user and provides a relevant web link if after the user is sent the reply.</p>

<h1 id="table-of-contents">Table of Contents</h1>

<p><a href="#declaration">DECLARATION ii</a></p>

<p><a href="#dedication">DEDICATION iii</a></p>

<p><a href="#acknoledgement">ACKNOLEDGEMENT v</a></p>

<p><a href="#abstract">ABSTRACT vi</a></p>

<p><a href="#list-of-figures">List of figures ix</a></p>

<p><a href="#list-of-tables">List of Tables x</a></p>

<p><a href="#abreviations">ABREVIATIONS xi</a></p>

<p><a href="#chapter-1-introduction">CHAPTER 1: INTRODUCTION 1</a></p>

<p><a href="#background">1.1 BACKGROUND 1</a></p>

<p><a href="#problem-statement">1.2 PROBLEM STATEMENT 2</a></p>

<p><a href="#research-objectives">1.3 RESEARCH OBJECTIVES 3</a></p>

<p><a href="#general-objectives">1.3.1 General Objectives 3</a></p>

<p><a href="#specific-objectives">1.3.2 Specific Objectives 3</a></p>

<p><a href="#justification-of-the-study">1.3.3 Justification of the Study 3</a></p>

<p><a href="#scope-of-the-study">1.3.4 Scope of the Study 4</a></p>

<p><a href="#study-limitation">1.3.5 Study Limitation 4</a></p>

<p><a href="#chapter-2-literature-review">CHAPTER 2: LITERATURE REVIEW 5</a></p>

<p><a href="#case-studies">2.1 Case Studies 5</a></p>

<p><a href="#case-1">2.1.1 CASE 1 5</a></p>

<p><a href="#case-2">2.1.2 CASE 2 6</a></p>

<p><a href="#case-3">2.1.3 CASE 3 7</a></p>

<p><a href="#case-4">2.1.4 CASE 4 8</a></p>

<p><a href="#chapter-3-methodology">CHAPTER 3: METHODOLOGY 9</a></p>

<p><a href="#introduction">3.1 INTRODUCTION 9</a></p>

<p><a href="#system-development-life-cycle">3.2 SYSTEM DEVELOPMENT LIFE CYCLE 9</a></p>

<p><a href="#the-purpose-of-waterfall-method-is-that-it-allows-for-departmentalization-and-control.-a-schedule-can-be-set-with-deadlines-for-each-stage-of-development-and-a-product-can-proceed-through-the-development-process-model-phases-one-by-one.">The purpose of waterfall method is that it allows for departmentalization and control. A schedule can be set with deadlines for each stage of development and a product can proceed through the development process model phases one by one. 9</a></p>

<p><a href="#requirements">3.2.1 REQUIREMENTS 10</a></p>

<p><a href="#research-design">3.2.2 RESEARCH DESIGN 11</a></p>

<p><a href="#implementation">3.2.3 IMPLEMENTATION 11</a></p>

<p><a href="#testing">3.2.4 TESTING 11</a></p>

<p><a href="#deployment">3.2.5 DEPLOYMENT 12</a></p>

<p><a href="#maintenance">3.2.6 MAINTENANCE 12</a></p>

<p><a href="#total-population">3.3 TOTAL POPULATION 12</a></p>

<p><a href="#sampling-procedure">3.4 SAMPLING PROCEDURE 12</a></p>

<p><a href="#sample-size">3.4.1 Sample size 12</a></p>

<p><a href="#sampling-design">3.4.2 Sampling Design 13</a></p>

<p><a href="#data-collection-method">3.5 DATA COLLECTION METHOD 13</a></p>

<p><a href="#documents-and-records">3.5.1 Documents and Records 13</a></p>

<p><a href="#internet-research">3.5.2 Internet Research 13</a></p>

<p><a href="#chapter-four-design-and-analysis">CHAPTER FOUR: DESIGN AND ANALYSIS 14</a></p>

<p><a href="#introduction-1">4.1 INTRODUCTION 14</a></p>

<p><a href="#requirement-analysis">4.2 REQUIREMENT ANALYSIS 14</a></p>

<p><a href="#functional-requirements">4.2.1 Functional Requirements 14</a></p>

<p><a href="#non-functional-requirements">4.2.2 Non-Functional Requirements 14</a></p>

<p><a href="#data-processing-and-analysis">4.3 DATA PROCESSING AND ANALYSIS 15</a></p>

<p><a href="#questionnaire">4.3.1 Questionnaire 15</a></p>

<p><a href="#system-analysis">4.4 SYSTEM ANALYSIS 18</a></p>

<p><a href="#introduction-2">4.4.1 INTRODUCTION 18</a></p>

<p><a href="#sequence-diagram">4.4.2 Sequence Diagram 18</a></p>

<p><a href="#use-case-diagram">4.4.3 Use Case Diagram 19</a></p>

<p><a href="#chapter-five-testing-and-implementation">CHAPTER FIVE: TESTING AND IMPLEMENTATION 20</a></p>

<p><a href="#configuring-the-development-environment">5.1 CONFIGURING THE DEVELOPMENT ENVIRONMENT 20</a></p>

<p><a href="#python-3.5">5.1.1 PYTHON 3.5 20</a></p>

<p><a href="#installing-python-3.5-requirements">5.1.2 INSTALLING PYTHON 3.5 REQUIREMENTS 21</a></p>

<p><a href="#the-import-system">5.2 THE IMPORT SYSTEM 21</a></p>

<p><a href="#running-bot.py">5.3 RUNNING BOT.PY 22</a></p>

<p><a href="#bot-commands">5.3.1 BOT COMMANDS 24</a></p>

<p><a href="#start-command">5.3.2 START COMMAND 24</a></p>

<p><a href="#help-command">5.3.3 HELP COMMAND 25</a></p>

<p><a href="#world-command">5.3.4 WORLD COMMAND 26</a></p>

<p><a href="#faqs-command">5.3.5 FAQS COMMAND 27</a></p>

<p><a href="#subscribe-command">5.3.6 SUBSCRIBE COMMAND 28</a></p>

<p><a href="#section-16">28</a></p>

<p><a href="#heroku">5.4 HEROKU 28</a></p>

<p><a href="#deploying-to-heroku">5.4.1 DEPLOYING TO HEROKU 29</a></p>

<p><a href="#_Toc48402661">CHAPTER SIX: DISCUSSION, CONCLUSION AND RECOMMENDATIONS 31</a></p>

<p><a href="#_Toc48402662">5.1 INTRODUCTION 31</a></p>

<p><a href="#_Toc48402663">5.2 DISCUSSIONS 31</a></p>

<p><a href="#_Toc48402664">5.3 CONCLUSIONS 33</a></p>

<p><a href="#_Toc48402665">5.4 RECOMMENDATION 33</a></p>

<p><a href="#_Toc48402666">5.5 LIMITATIONS OF THE STUDY 34</a></p>

<p><a href="#_Toc48402667">References 35</a></p>

<p><a href="#appendix-a">Appendix A 38</a></p>

<p><a href="#a1-python-language-grammer-specifications">A1 PYTHON LANGUAGE GRAMMER SPECIFICATIONS 38</a></p>

<p><a href="#a2-json-language-grammer-specifications">A2 JSON LANGUAGE GRAMMER SPECIFICATIONS 43</a></p>

<p><a href="#appendix-b">Appendix B 45</a></p>

<p><a href="#sample-source-code-and-output-listing">Sample source code and output listing 45</a></p>

<p><a href="#b1-commands-code-for-the-bot-and-replies">B1 COMMANDS CODE FOR THE BOT AND REPLIES 45</a></p>

<p><a href="#section-37">B2 CODE FOR ACCESSING THE COVID-19 API SERVERS 50</a></p>

<p><a href="#b3-main-source-code-of-the-bot-including-access-to-the-bot-api-token-and-notify-time-for-sending-the-daily-notifications">B3 MAIN SOURCE CODE OF THE BOT INCLUDING ACCESS TO THE BOT API TOKEN AND NOTIFY TIME FOR SENDING THE DAILY NOTIFICATIONS 53</a></p>

<p><a href="#b4-json-code-containing-bot-token-and-timer">B4 JSON CODE CONTAINING BOT TOKEN AND TIMER 65</a></p>

<h2 id="list-of-figures">List of figures</h2>

<p><a href="#_Toc48402370">Figure 1 infected countries on a logarithmic scale.(AaronWard, 2020) 5</a></p>

<p><a href="#_Toc48402371">Figure 2 Covid-19 visualization(localeai, 2020) 6</a></p>

<p><a href="#_Toc48402372">Figure 3 Corona Virus Tracker Swift UI(alfianlosari, 2020) 7</a></p>

<p><a href="#_Toc48402373">Figure 4 Deaths Per Million of Inhabitants(github, 2020) 8</a></p>

<p><a href="#_Toc48402374">Figure 5 Waterfall model(creately.com, 2020) 10</a></p>

<p><a href="#_Toc48402375">Figure 6 Respondents response on having used a chatbot before(docs.google.com, 2020) 16</a></p>

<p><a href="#_Toc48402376">Figure 7 Respondents response on having faced challenges as they used the chatbot(docs.google.com, 2020) 16</a></p>

<p><a href="#_Toc48402377">Figure 8 Respondents response on need of a covid chatbot(docs.google.com, 2020) 17</a></p>

<p><a href="#_Toc48402378">Figure 9 Sequence Diagram(draw.io, 2020) 18</a></p>

<p><a href="#_Toc48402379">Figure 10 Use Case Diagram(draw.io, 2020) 19</a></p>

<p><a href="#_Toc48402380">Figure 11 Python download page 20</a></p>

<p><a href="#_Toc48402381">Figure 12 pip argument 20</a></p>

<p><a href="#_Toc48402382">Figure 13 python pip 20</a></p>

<p><a href="#_Toc48402383">Figure 14 py -m pip 20</a></p>

<p><a href="#_Toc48402384">Figure 15 requirements.txt 21</a></p>

<p><a href="#_Toc48402385">Figure 16 pip install 21</a></p>

<p><a href="#_Toc48402386">Figure 17 import modules 22</a></p>

<p><a href="#_Toc48402387">Figure 18 bot.py run 22</a></p>

<p><a href="#_Toc48402388">Figure 19 config.json 23</a></p>

<p><a href="#_Toc48402389">Figure 20 CONFIG_FILE 23</a></p>

<p><a href="#_Toc48402390">Figure 21 Commands list 23</a></p>

<p><a href="#_Toc48402391">Figure 22 /start command 24</a></p>

<p><a href="#_Toc48402392">Figure 23 /help command 25</a></p>

<p><a href="#_Toc48402393">Figure 24 /world command 26</a></p>

<p><a href="#_Toc48402394">Figure 25 /faqs command 27</a></p>

<p><a href="#_Toc48402395">Figure 26 /subscribe command 28</a></p>

<p><a href="#_Toc48402396">Figure 27 git push heroku master 28</a></p>

<p><a href="#_Toc48402397">Figure 28 heroku login 29</a></p>

<p><a href="#_Toc48402398">Figure 29 git clone 29</a></p>

<p><a href="#_Toc48402399">Figure 30 clone 29</a></p>

<p><a href="#_Toc48402400">Figure 31 commit 29</a></p>

<p><a href="#_Toc48402401">Figure 32 Procfile 30</a></p>

<p><a href="#_Toc48402402">Figure 33 console 30</a></p>

<p><a href="#_Toc48402403">Figure 34 Console python3 bot.py 30</a></p>

<h2 id="list-of-tables">List of Tables</h2>

<p><a href="#_Toc47463626">Table 1 Respondents response 15</a></p>

<h2 id="abreviations">ABREVIATIONS</h2>

<p>API - Application programming interface</p>

<p>COVID-19 - Coronavirus Disease 2019</p>

<p>SARS-CoV-2 - Severe acute respiratory syndrome coronavirus 2</p>

<p>ARIMA - Autoregressive integrated moving average</p>

<p>URL - Uniform Resource Locator</p>

<p>ArcGIS – Arc Geographic Information System</p>

<p>WHO - World Health Organization</p>

<p>Q\&amp;A - Question and Answer</p>

<p>ESRI - Environmental Systems Research Institute</p>

<h1 id="chapter-1-introduction">CHAPTER 1: INTRODUCTION</h1>

<h2 id="11-background">1.1 BACKGROUND</h2>

<blockquote>
  <p>Since the outbreak of the corona virus there has been a need to have systems that will enable citizens of a country to have readily available information to make them get required information of what is going on.</p>

  <p>This is after the famous Spanish flu(B. J. Jester et al., 2018) that hit the world 100 years ago(B. Jester et al., 2019) and people were not prepared enough for it despite technological inventions but as per the current technological inventions that we are now there is need to have some applications that allow people to get the required information to minimize the spread of the virus.</p>

  <p>The purpose of the project is to build a telegram-based bot that feeds the subscriber information based on the latest count of corona virus that is current statistics of local total confirmed, deaths, and recovered cases.</p>

  <p>The bot also provides advice from the government and the required rules to be followed provided by the government. The research findings help the Kenyan citizens to be aware and equipped with the knowledge of how to handle the virus situation and follow the regulations laid out by the government and also get track of the statistics in the country.</p>
</blockquote>

<h2 id="problem-statement">PROBLEM STATEMENT</h2>

<p>According to the way the information about corona virus is being passed out via the television, radio, twitter(MOH_Kenya, 2020) and websites(Worldometers, 2020) there has been an ignorance of the information being conveyed thus seen the increase in the number of the corona virus related cases due to ignorance despite the information given.</p>

<p>The increase in the number of cases has been attributed to the ignorance of the information being conveyed by the government which has led to many people succumbing to the virus.</p>

<p>The aim of this project is to come up with an alternative method of information circulation to the people of Kenya to get timely the information provided by the government and follow up direct from their mobile phone (Telegram(telegram.org, 2020)).</p>

<ol>
  <li>
    <h2 id="research-objectives">RESEARCH OBJECTIVES</h2>

    <ol>
      <li>
        <h3 id="general-objectives">General Objectives</h3>
      </li>
    </ol>
  </li>
</ol>

<p>The main objective of this study is to contribute to the solution of updating people of the corona virus cases by developing a telegram bot that shows the daily count of corona virus cases in Kenya and the global count of the virus.</p>

<h3 id="specific-objectives">Specific Objectives</h3>

<p>1)  To develop an information resource were all the relevant information about the questions and the answers will be stored.</p>

<p>2)  To provide a summarized format of the covid-19 cases such as the deaths, infected and recovered cases.</p>

<p>3)  To develop a bot interface which aims to give the ability to potential users and their friends to request data of covid-19 related cases in the chatbot and get convincing replies.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.  ### Justification of the Study
</code></pre></div></div>

<p>The significance of the study should is to provide a channel for transmission of information about the corona virus cases directly from the government. It is important as the bot users will be able to get first-hand information from the government directly from their chat application saving their time of going to the website or other sources.</p>

<h3 id="scope-of-the-study">Scope of the Study</h3>

<p>The study focuses on the telegram users and all other people in Kenya who are capable of joining telegram to make use of its open source API the encamp uses of running a bot</p>

<h3 id="135-study-limitation">1.3.5 Study Limitation</h3>

<p>The bot does not provide previous data of the covid-19 related cases such data of the previous months or days.</p>

<h1 id="chapter-2-literature-review">CHAPTER 2: LITERATURE REVIEW</h1>

<h2 id="21-case-studies">2.1 Case Studies</h2>

<h3 id="211-case-1">2.1.1 CASE 1</h3>

<p><strong>Covidify</strong></p>

<p>Corona virus report and dataset generator for python(AaronWard, 2020) that creates a time series dataset, Creates a daily stats dataset, forecast global and country confirmed cases, generate visualizations ,filter by country, filter by country, shows number of people currently infected and generates an excel report including all of the above.</p>

<p>An ARIMA model is trained and used to forecast the cumulative cases for N number of days into the future.</p>

<p>The following figure gives an example of Covidify displaying covid-19 data.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image2.png" alt="C:\Users\Mike Owino\Downloads\confirmed_log.png" /></p>

<p><span id="_Toc48402370" class="anchor"></span>Figure 1 infected countries on a logarithmic scale.(AaronWard, 2020)</p>

<h3 id="212-case-2">2.1.2 CASE 2</h3>

<p><strong>Covid-19 live visualization</strong></p>

<p>API project which gives the layers data to the webapp(localeai, 2020). The webapp currently supports the layers that are picked up from periodically generated file from GitHub repository.</p>

<p>The GitHub api url for the repo holds the layers data. It is used to pick up the last updated date from the latest commit to the repo. It uses the GitHub API, along with the static repository URL.</p>

<p>The following figure gives an example of Covid-19 live visualization displaying covid-19 data.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image3.png" alt="C:\Users\Mike Owino\Downloads\meta.png" /></p>

<p><span id="_Toc48402371" class="anchor"></span>Figure 2 Covid-19 visualization(localeai, 2020)</p>

<h3 id="213-case-3">2.1.3 CASE 3</h3>

<p><strong>Corona Virus Tracker Swift UI</strong></p>

<p>The project gets current statistics of global total confirmed, deaths, recovered cases, <strong>s</strong>tatistics of countries and regions total cases count World map with annotation pin and description of affected regions Datasets is provided by ArcGIS Esri Corona Virus dataset(alfianlosari, 2020). Basic advice to prevent and handle virus, myth busters Q\&amp;A from WHO.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image4.jpeg" alt="C:\Users\Mike Owino\Downloads\promo.jpg" /></p>

<p><span id="_Toc48402372" class="anchor"></span>Figure 3 Corona Virus Tracker Swift UI(alfianlosari, 2020)</p>

<h3 id="214-case-4">2.1.4 CASE 4</h3>

<p><strong>Covid19-Dashboard</strong></p>

<p>This project was supported by a virtual team of open source collaborators that gather data, make visualizations and perform analysis regarding the COVID-19 epidemic(github, 2020).</p>

<p>We saw that data scientists were struggling to share information with each other, so we used this project to aid in the sharing of data and information.</p>

<p>This project aims to offer an accessible way for data professionals to share dashboards (that are updated with new data automatically) without requiring any expertise in front end development.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image5.png" alt="C:\Users\Mike Owino\Downloads\visualization.png" /></p>

<p><span id="_Toc48402373" class="anchor"></span>Figure 4 Deaths Per Million of Inhabitants(github, 2020)</p>

<h1 id="chapter-3-methodology">CHAPTER 3: METHODOLOGY</h1>

<h2 id="31-introduction">3.1 INTRODUCTION</h2>

<p>This chapter deals with the research method that will be adopted and the analysis of the data collected. This study entails a descriptive survey design; the population that was the Kenya’s and the world population, sample design, data collection and analysis.</p>

<h2 id="32-system-development-life-cycle">3.2 SYSTEM DEVELOPMENT LIFE CYCLE</h2>

<p>###</p>

<p>The design and development of the bot will be followed by the waterfall model.</p>

<h3 id="the-purpose-of-waterfall-method-is-that-it-allows-for-departmentalization-and-control-a-schedule-can-be-set-with-deadlines-for-each-stage-of-development-and-a-product-can-proceed-through-the-development-process-model-phases-one-by-one">The purpose of waterfall method is that it allows for departmentalization and control. A schedule can be set with deadlines for each stage of development and a product can proceed through the development process model phases one by one.</h3>

<p>It is easy to manage due to the rigidity of the model as each phase has specific deliverables and a review process and phases are processed and completed one at a time and they do not overlap. The waterfall model also works well for smaller projects like mine where requirements are very well understood.</p>

<p>The sample waterfall model is as shown in the diagram below.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image6.png" alt="" /></p>

<p><span id="_Toc48402374" class="anchor"></span>Figure 5 Waterfall model(creately.com, 2020)</p>

<h3 id="321-requirements">3.2.1 REQUIREMENTS</h3>

<p>In this phase I will focus on possible requirements of the system for the development. Requirements to be gathered subsequent to the end user consultation includes Google Cloud platform(cloud.google.com, 2020) , Heroku(heroku.com, 2020) ,Telegram generated bot with a working API , Internet connection ,personal computer , mobile phone , Visual Studio Code(code.visualstudio.com, 2020) ,Git(git-scm.com, n.d.) client and python environment installed on the computer.</p>

<h3 id="322-research-design">3.2.2 RESEARCH DESIGN</h3>

<p>Prior to beginning the actual coding, it is inevitable to understand what actions are to be taken and what they should like. The requirement specifications will be studied in detail in this phase and the design of the bot is prepared. The design specifications will be the base for the implementation and unit testing model phase.</p>

<p>Visual Studio Code will be used in the designing of the bot together with the bot to get the layout of the buttons to be used by the users and the texts to be displayed on the press of the button.</p>

<h3 id="implementation">IMPLEMENTATION</h3>

<p>After receiving the system design documents, the work will be shared into various modules and the real coding is commenced by use of Visual Studio Code. The system will be developed into small coding files such as the API file and the layout file. These units will later be integrated in the subsequent phase. Every unit will be tested for its functionality to meet the bot functionality.</p>

<h3 id="324-testing">3.2.4 TESTING</h3>

<p>The modules that will be divided into units will be integrated into a complete system and tested for proper coordination among modules and system behaves as per the specifications. The bot will be tested by being deployed to Google Cloud for its integration with the telegram bot API to start operational testing.</p>

<h3 id="325-deployment">3.2.5 DEPLOYMENT</h3>

<p>Once the testing is completed and the bot is found to meet the user requirements it will be deployed to Heroku via the git client as Heroku only supports deployment by use of git.Postress(data.heroku.com, 2020) will be used to connect the bot with the database accessible(NovelCOVID REST API (NovelCOVID, 2020)) of the covid-19 cases the to the bots API and displayed to the users.</p>

<h3 id="326-maintenance">3.2.6 MAINTENANCE</h3>

<p>It is a never-ending phase. Once the system is running in production environment, problems may come up such as change of the database access URL. The issues that are related to the bot will be solved only after deployment of the system. The problems may arise from time to time and need to be solved.</p>

<p>##</p>

<h2 id="33-total-population">3.3 TOTAL POPULATION</h2>

<p>The total population to be considered it the world population which has already been counted for use by <em>Worldometer</em> that will be further broken down into Kenyan population and the top most affected countries in the world to see how other countries are doing with the corona virus.</p>

<h2 id="34-sampling-procedure">3.4 SAMPLING PROCEDURE</h2>

<h3 id="341-sample-size">3.4.1 Sample size</h3>

<p>The sample size includes the world data that is fetched from the covid19 API which the main focus will be put on the Kenyan data such as the frequently asked questions highlighted in the bot and the Kenya command which makes it more accessible for users to get the Kenya data.</p>

<h3 id="sampling-design">Sampling Design</h3>

<p>Out of the world population data available in the API website ill sample Kenyan data to deal with and narrow down to the infected, deaths and recovered persons.</p>

<h2 id="35-data-collection-method">3.5 DATA COLLECTION METHOD</h2>

<h3 id="351-documents-and-records">3.5.1 Documents and Records</h3>

<p>Data is examined from documents containing relevant covid-19 cases such as journals and records containing covid-19 cases such as data of ArcGIS from GitHub spreadsheets</p>

<h3 id="352-internet-research">3.5.2 Internet Research</h3>

<p>The Internet will be a great source <strong>of</strong> information and material, majority of the research to be carried out will be done here to avoid reinventing the wheel.</p>

<h1 id="chapter-four-design-and-analysis">CHAPTER FOUR: DESIGN AND ANALYSIS</h1>

<h2 id="41-introduction">4.1 INTRODUCTION</h2>

<p>In this chapter I looked at requirement analysis that is functional and non-functional requirements by mentioning, describing and giving examples. There is data analysis that is fetched from the COVID-19 API(lmao.ninja, 2020) and then and then analyzed and presented to the users to get the desired reply. Moreover, the analysis of the data can be analyzed and presented in an incremental or decrement format. The flow of the data from the COVID-19 API to the users will be represented by use-case diagram and sequence diagram by use of the python-telegram-bot.</p>

<h2 id="42-requirement-analysis">4.2 REQUIREMENT ANALYSIS</h2>

<h3 id="421-functional-requirements">4.2.1 Functional Requirements</h3>

<ul>
  <li>
    <p>The bot users can get immediate feedback of the daily infections, recovered and the death count of the day.</p>
  </li>
  <li>
    <p>The bot users can get the frequently asked questions about Corona Virus and provided the national help line which will be used to contact the government in case of imprecations.</p>
  </li>
</ul>

<h3 id="422-non-functional-requirements">4.2.2 Non-Functional Requirements</h3>

<ul>
  <li>Ease of accessibility – As the users can easily access the data by use of commands and the notification function that notifies the users with the daily updates of the Corona Virus.</li>
</ul>

<h2 id="43-data-processing-and-analysis">4.3 DATA PROCESSING AND ANALYSIS</h2>

<p>The processed data is not stored to any database within the bot but it is stored in the COVID-19 API database where several people can access it for research purpose and Governments for comparison.</p>

<h3 id="431-questionnaire">4.3.1 Questionnaire</h3>

<p>The questionnaires we were able to reach out to 25 people. Out of the 7 questionnaires, 24 of them responded to the affirmative, whereas the other 1 did not see the proposed bot as a solution to the contribution of updating people of the COVID-19 cases. This translated to 95% positive response as compared to 5% to the negative. The following is the tabulated data and resultant table</p>

<p><span id="_Toc47463626" class="anchor"></span>Table 1 Respondents response</p>

<table>
<thead>
<tr class="header">
<th><p>Number of Questionnaires</p>
<p>Respondents</p></th>
<th>Positive response</th>
<th>Negative response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>25</td>
<td>24</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>4.3.2 Charts and Graphs</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image7.png" alt="" /></p>

<p><span id="_Toc48402375" class="anchor"></span>Figure 6 Respondents response on having used a chatbot before(docs.google.com, 2020)</p>

<p>Out of the 25 responses, 21 agreed to have used a bot before and therefore it would be easier to build a bot as many of them are familiar with how it works.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image8.png" alt="" /></p>

<p><span id="_Toc48402376" class="anchor"></span>Figure 7 Respondents response on having faced challenges as they used the chatbot(docs.google.com, 2020)</p>

<p>Out of the 25 responses 18 agreed that while they interacted with the bots they never experience problems using them, 5 of them had problems with the bot while 1 had a challenge that he highlighted.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image9.png" alt="" /></p>

<p><span id="_Toc48402377" class="anchor"></span>Figure 8 Respondents response on need of a covid chatbot(docs.google.com, 2020)</p>

<p>Out of the 25 responses from the questionnaires sent out 20 agreed that indeed they needed a chatbot with enabled features of accessing the covid 19 statistics as it will be simple for them to access the data.</p>

<h1 id="44-system-analysis">4.4 SYSTEM ANALYSIS</h1>

<h3 id="441-introduction">4.4.1 INTRODUCTION</h3>

<p>In this subchapter Sequence diagram and Use-case diagrams will be used to explain in details the flow of data from the API to the users as they interact with the bot</p>

<h3 id="442-sequence-diagram">4.4.2 Sequence Diagram</h3>

<p>This diagram was instrumental in determining the sequence of actions executed on the system which included user input and system responses. It outlines the roles played by both the bot users and the API system via the bot in providing feedback to the users.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image10.png" alt="C:\Users\Mike Owino\Downloads\usecase 1 Diagram.png" /></p>

<p><span id="_Toc48402378" class="anchor"></span>Figure 9 Sequence Diagram(draw.io, 2020)</p>

<h3 id="443-use-case-diagram">4.4.3 Use Case Diagram</h3>

<p>The class diagram demonstrates the relationships between the different objects in the system. Its importance is emphasized by the fact that the covid bot has an underlying database as opposed to a relational database thus it was instrumental in the design of the database.</p>

<p><img src="assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image11.png" alt="C:\Users\Mike Owino\Downloads\Untitled Diagram (1).png" /></p>

<p><span id="_Toc48402379" class="anchor"></span>Figure 10 Use Case Diagram(draw.io, 2020)</p>

<h1 id="chapter-five-testing-and-implementation">CHAPTER FIVE: TESTING AND IMPLEMENTATION</h1>

<p>#</p>

<p>In this chapter the functionality of the bot is outlined. The bot was implemented using python programming language and adhered to python-telegram-bot flow as stated in chapter 4 Design and Analysis. Specific testing is done to different functionalities of the bot.</p>

<h2 id="51-configuring-the-development-environment">5.1 CONFIGURING THE DEVELOPMENT ENVIRONMENT</h2>

<h3 id="511-python-35">5.1.1 PYTHON 3.5</h3>

<p>The first environment to install the python library from python.org which will run the codes that will be used by then bot.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image12.png" alt="" /></p>

<p><span id="_Toc48402380" class="anchor"></span>Figure 11 Python download page</p>

<p>This is followed by installing pip which is a command line program. When you install pip, a pip command is added to the system, which can be run from the command prompt as follows:</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image13.png" alt="" /></p>

<p><span id="_Toc48402381" class="anchor"></span>Figure 12 pip argument</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image14.png" alt="" /></p>

<p><span id="_Toc48402382" class="anchor"></span>Figure 13 python pip</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image15.png" alt="" /></p>

<p><span id="_Toc48402383" class="anchor"></span>Figure 14 py -m pip</p>

<h3 id="512-installing-python-35-requirements">5.1.2 INSTALLING PYTHON 3.5 REQUIREMENTS</h3>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image16.png" alt="" /></p>

<p><span id="_Toc48402384" class="anchor"></span>Figure 15 requirements.txt</p>

<p>Requirements include the files containing a list of items to be installed using <strong>pip install</strong>. In our case we shall use the pip install –r requirements.txt as follows:</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image17.png" alt="" /></p>

<p><span id="_Toc48402385" class="anchor"></span>Figure 16 pip install</p>

<h2 id="52-the-import-system">5.2 THE IMPORT SYSTEM</h2>

<p>The import statement is the most common way of invoking the import machinery, but it is not the only way. Functions such as importlib. import_module() and built-in __import__() can also be used to invoke the import machinery.</p>

<p>The import statement combines two operations; it searches for the named module, then it binds the results of that search to a name in the local scope. The search operation of the import statement is defined as a call to the __import__() function, with the appropriate arguments.</p>

<p>The return value of __import__() is used to perform the name binding operation of the import statement. See the import statement for the exact details of that name binding operation.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image18.png" alt="" /></p>

<p><span id="_Toc48402386" class="anchor"></span>Figure 17 import module</p>

<p>The datetime module imports the date of the day and the current time from the system that that the bot is running.</p>

<p>The import json command imports the .json library that will be used to access the config.json file which contains the bot token and the set notify_time.</p>

<p>The import sleep contains the set time rule that is set to avoid flood limits which is requirement when building telegram bots to avoid causing traffic in their servers.</p>

<h2 id="53-running-botpy">5.3 RUNNING BOT.PY</h2>

<p>The bot.py file contains the executable command that is required by the python language to run the file.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image19.png" alt="" /></p>

<p><span id="_Toc48402387" class="anchor"></span>Figure 18 bot.py run</p>

<p>The bot.py file contains the accessible to the config.json file which contains the bot token that links the bot with the code in use.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image20.png" alt="" /></p>

<p><span id="_Toc48402388" class="anchor"></span>Figure 19 config.json</p>

<p>The CONFIG_FILE fetches the config.json during the START command intiate.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image21.png" alt="" /></p>

<p><span id="_Toc48402389" class="anchor"></span>Figure 20 CONFIG_FILE</p>

<p>After the /Start command, the bot is initiated and the users’ username is collected and stored in the bot database where the users’ commands will be stored and incase the user subscribes to to the notifications, their usernames’ will be used to send the notifications.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image22.png" alt="" /></p>

<p><span id="_Toc48402390" class="anchor"></span>Figure 21 Commands list</p>

<h3 id="531-bot-commands">5.3.1 BOT COMMANDS</h3>

<p>##</p>

<p>/start - Start the bot</p>

<p>/help - List of other available commands</p>

<p>/world - Worldwide stats</p>

<p>/kenya - Kenya’s current stats</p>

<p>/setcountry - Set to get notifications daily followed by i.e ‘kenya’</p>

<p>/faqs - Frequently Asked Questions about COVID-19</p>

<p>/today - Today’s summarized cases</p>

<p>/list - Arrange the world countries in list from most cases</p>

<p>/subscribe - Subscribe to daily notification updates</p>

<p>/donate - Donate to this project to move to fast servers</p>

<h3 id="532-start-command">5.3.2 START COMMAND</h3>

<p>The start button is global command set to initialize the bot on the first run by the user, In this <em>covidly</em> bot the /start command initiates a reply to the user with the other basic commands to be used within the bot.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image23.png" alt="" /></p>

<p><span id="_Toc48402391" class="anchor"></span>Figure 22 /start command</p>

<h3 id="533-help-command">5.3.3 HELP COMMAND</h3>

<p>The /help command is a global command in telegram bots that returns a help message. It can be a short text about what your bot can do and a list of commands and also includes the contacts to the developer and feedback button if necessary. In this bot it highlights the available commands to be used by the users and additional features by the bot such as the inline mode to tag the bot in any group chat and get a reply of the called country.</p>

<p>Data source of the bot’s figures are also highlighted and data access.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image24.png" alt="" /></p>

<p><span id="_Toc48402392" class="anchor"></span>Figure 23 /help command</p>

<h3 id="534-world-command">5.3.4 WORLD COMMAND</h3>

<p>The /world command returns the total value of the worldwide corona virus cases as from the covid API. In case a picture of the command being called is found in the Wikipedia page, it will be returned together by the data and if no picture is found only data will be returned.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image25.png" alt="" /></p>

<p><span id="_Toc48402393" class="anchor"></span>Figure 24 /world command</p>

<h3 id="535-faqs-command">5.3.5 FAQS COMMAND</h3>

<p>The /faqs command is shortened from frequently asked questions which basically is one of the key features of the bot to return to its users a list of frequently asked questions about corona virus which were fetched from the ministry of health official website.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image26.png" alt="" /></p>

<p><span id="_Toc48402394" class="anchor"></span>Figure 25 /faqs command</p>

<h3 id="536-subscribe-command">5.3.6 SUBSCRIBE COMMAND</h3>

<p>The /subscribe button triggers the [update.message.chat.id] functions which sends messages automatically to the users who pressed the command by storing their chat id in a database that will be triggered daily to send to the specified users notifications daily. This command only works if the user had previously selected the country <em>Kenya then</em> followed by the command /subscribe.</p>

<p>##</p>

<h2><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image27.png" alt="" /></h2>

<p><span id="_Toc48402395" class="anchor"></span>Figure 26 /subscribe command</p>

<p>##</p>

<p>##</p>

<p>##</p>

<p>##</p>

<p>##</p>

<p>##</p>

<h2 id="54-heroku">5.4 HEROKU</h2>

<p>Heroku platform lets you deploy, run and manage applications written in Ruby, Node.js, Java, Python, Clojure, Scala, Go and PHP. The platform provides great flexibility in the choice of programming language, application framework, and organization of code thus the need for deploying my python app to Heroku as it will be easily accessible and every time a call is made by the users’ a feedback is quickly provided as compared to hosting the app locally.</p>

<p>To get started with Heroku an account is needed in order to be provided with the services. To deploy apps to Heroku, the git client will be used to push the apps over their servers.</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image28.png" alt="" /></p>

<p><span id="_Toc48402396" class="anchor"></span>Figure 27 git push heroku master</p>

<h3 id="541-deploying-to-heroku">5.4.1 DEPLOYING TO HEROKU</h3>

<h2 id="-1"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image29.png" alt="" /></h2>

<p><span id="_Toc48402397" class="anchor"></span>Figure 28 heroku login</p>

<p>##</p>

<h2 id="a-login-to-heroku-via-the-git-client-to-authenticate-with-the-user-account-and-allow-deploying-the-worked-files-over-to-the-heroku-servers">A login to Heroku via the git client to authenticate with the user account and allow deploying the worked files over to the Heroku servers.</h2>

<p>##</p>

<h2 id="-2"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image30.png" alt="" /></h2>

<p><span id="_Toc48402398" class="anchor"></span>Figure 29 git clone</p>

<p>##</p>

<p><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image31.png" alt="" /></p>

<p><span id="_Toc48402399" class="anchor"></span>Figure 30 clone</p>

<h2 id="cloning-the-empty-repository-which-was-created-over-the-web-to-the-local-machine-and-the-changing-the-working-directory-to-the-specified-covidly-repository">Cloning the empty repository which was created over the web to the local machine and the changing the working directory to the specified <strong><em>covidly</em></strong> repository.</h2>

<p>##</p>

<h2 id="-3"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image32.png" alt="" /></h2>

<p><span id="_Toc48402400" class="anchor"></span>Figure 31 commit</p>

<p>##</p>

<h2 id="after-a-successful-clone-the-worked-file-is-to-be-copied-to-the-repository-then-pushed-to-the-heroku-master-repository-which-will-automatically-run-detect-the-app-language-python-and-the-install-the-requirementstxt-file-items-to-the-python-console-this-is-all-achieved-by-use-of-the-procfile-file-in-the-root-directory-of-the-repository-which-specifies-the-command-that-will-be-used-to-run-the-entire-app-during-the-deployment-period-python3-botpy">After a successful clone the worked file is to be copied to the repository then pushed to the Heroku master repository which will automatically run detect the app language <strong><em>python</em></strong> and the install the <strong><em>requirements.txt</em></strong> file items to the python console. This is all achieved by use of the <strong><em>Procfile</em></strong> file in the root directory of the repository which specifies the command that will be used to run the entire app during the deployment period <strong><em>python3 bot.py</em></strong></h2>

<p>##</p>

<h2 id="-4"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image33.png" alt="" /></h2>

<p><span id="_Toc48402401" class="anchor"></span>Figure 32 Procfile</p>

<p>##</p>

<h2 id="during-the-first-run-an-access-to-the-heroku-cloud-will-be-necessary-to-start-the-bot-worker-after-which-the-bot-will-run-continuously-on-the-heroku-cloud-making-it-cheaper-and-affordable-to-run-the-bot-for-a-long-time-compared-to-running-the-bot-locally-where-the-bot-could-have-stopped-in-case-the-computer-lost-access-to-internet-access-or-got-shut-down">During the first run an access to the Heroku cloud will be necessary to start the bot <strong><em>worker</em></strong> after which the bot will run continuously on the Heroku cloud making it cheaper and affordable to run the bot for a long time compared to running the bot locally where the bot could have stopped in case the computer lost access to internet access or got shut down.</h2>

<h2 id="-5"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image34.png" alt="" /></h2>

<p><span id="_Toc48402402" class="anchor"></span>Figure 33 console</p>

<h2 id="-6"><img src="https://mikeowino.com/blog/assets/img/2020-08-24-MIKE-OWINO-DOCUMENTATION/media/image35.png" alt="" /></h2>

<p><span id="_Toc48402403" class="anchor"></span>Figure 34 Console python3 bot.py</p>

<p>##</p>

<h1 id="references">References</h1>

<p>AaronWard. (2020). <em>covidify.</em></p>

<p>alfianlosari. (2020). <em>CoronaVirusTrackerSwiftUI.</em></p>

<p>cloud.google.com. (2020). <em>cloud.google.com.</em></p>

<p>code.visualstudio.com. (2020). <em>code.visualstudio.com.</em></p>

<p>creately.com. (2020). <em>creately.com.</em></p>

<p>data.heroku.com. (2020). <em>data.heroku.com.</em></p>

<p>de Groot, R. J., Baker, S. C., Baric, R. S., Brown, C. S., Drosten, C., Enjuanes, L., Fouchier, R. A. M., Galiano, M., Gorbalenya, A. E., Memish, Z. A., Perlman, S., Poon, L. L. M., Snijder, E. J., Stephens, G. M., Woo, P. C. Y., Zaki, A. M., Zambon, M., &amp; Ziebuhr, J. (2013). Middle East Respiratory Syndrome Coronavirus (MERS-CoV): Announcement of the Coronavirus Study Group. <em>Journal of Virology</em>, <em>87</em>(14), 7790–7792. https://doi.org/10.1128/jvi.01244-13</p>

<p>git-scm.com. (n.d.). <em>git</em></p>

<p>AaronWard. (2020). <em>covidify.</em>alfianlosari. (2020). <em>CoronaVirusTrackerSwiftUI.</em>cloud.google.com. (2020). <em>cloud.google.com.</em>code.visualstudio.com. (2020). <em>code.visualstudio.com.</em>creately.com. (2020). <em>creately.com.</em>data.heroku.com. (2020). <em>data.heroku.com.</em>docs.google.com. (2020). <em>forms.</em>draw.io. (2020). <em>diagrams.net.</em>git-scm.com. (n.d.). <em>git-scm.com.</em>github. (2020). <em>covid19-dashboard.</em>heroku.com. (2020). <em>heroku.com.</em>Jester, B. J., Uyeki, T. M., Patel, A., Koonin, L., &amp; Jernigan, D. B. (2018). 100 Years of Medical Countermeasures and Pandemic Influenza Preparedness. <em>American Journal of Public Health</em>, <em>108</em>(11), 1469–1472. https://doi.org/10.2105/AJPH.2018.304586Jester, B., Uyeki, T. M., Jernigan, D. B., &amp; Tumpey, T. M. (2019). Historical and clinical aspects of the 1918 H1N1 pandemic in the United States. <em>Virology</em>, <em>527</em>(May 2018), 32–37. https://doi.org/10.1016/j.virol.2018.10.019lmao.ninja. (2020). <em>corona.</em>localeai. (2020). <em>covid19-live-visualization.</em>NovelCOVID. (2020). <em>API.</em>Organization, W. H., &amp; others. (2020). <em>Coronavirus disease 2019 (COVID-19): situation report, 72</em>.telegram.org. (2020). <em>telegram.org.</em>Worldometers. (2020). <em>COVID-19 Coronavirus Pandemic.-scm.com.</em></p>

<p>github. (2020). <em>covid19-dashboard.</em></p>

<p>heroku.com. (2020). <em>heroku.com.</em></p>

<p>Jester, B. J., Uyeki, T. M., Patel, A., Koonin, L., &amp; Jernigan, D. B. (2018). 100 Years of Medical Countermeasures and Pandemic Influenza Preparedness. <em>American Journal of Public Health</em>, <em>108</em>(11), 1469–1472. https://doi.org/10.2105/AJPH.2018.304586</p>

<p>Jester, B., Uyeki, T. M., Jernigan, D. B., &amp; Tumpey, T. M. (2019). Historical and clinical aspects of the 1918 H1N1 pandemic in the United States. <em>Virology</em>, <em>527</em>(May 2018), 32–37. https://doi.org/10.1016/j.virol.2018.10.019</p>

<p>localeai. (2020). <em>covid19-live-visualization.</em></p>

<p>MOH_Kenya. (2020). <em>#KomeshaCorona.</em></p>

<p>NovelCOVID. (2020). <em>API.</em></p>

<p>Organization, W. H., &amp; others. (2020). <em>Coronavirus disease 2019 (COVID-19): situation report, 72</em>.</p>

<p>Rajendran, D. K., Rajagopal, V., Alagumanian, S., Santhosh Kumar, T., Sathiya Prabhakaran, S. P., &amp; Kasilingam, D. (2020). Systematic literature review on novel corona virus SARS-CoV-2: a threat to human era. <em>VirusDisease</em>. https://doi.org/10.1007/s13337-020-00604-z</p>

<p>Shereen, M. A., Khan, S., Kazmi, A., Bashir, N., &amp; Siddique, R. (2020). COVID-19 infection: Origin, transmission, and characteristics of human coronaviruses. <em>Journal of Advanced Research</em>, <em>24</em>, 91–98. https://doi.org/10.1016/j.jare.2020.03.005</p>

<p>Worldometers. (2020). <em>COVID-19 Coronavirus Pandemic.</em></p>

<p>Zhang, C., Zheng, W., Huang, X., Bell, E. W., Zhou, X., &amp; Zhang, Y. (2020). Protein Structure and Sequence Reanalysis of 2019-nCoV Genome Refutes Snakes as Its Intermediate Host and the Unique Similarity between Its Spike Protein Insertions and HIV-1. <em>Journal of Proteome Research</em>, <em>19</em>(4), 1351–1360. https://doi.org/10.1021/acs.jproteome.0c00129</p>

<p>Zhang, L., &amp; Liu, Y. (2020). Potential interventions for novel coronavirus in China: A systematic review. In <em>Journal of Medical Virology</em> (Vol. 92, Issue 5). https://doi.org/10.1002/jmv.25707</p>

<h1 id="appendix-a">Appendix A</h1>

<h2 id="a1-python-language-grammer-specifications">A1 PYTHON LANGUAGE GRAMMER SPECIFICATIONS</h2>

<p><em># Grammar for Python</em></p>

<p><em># NOTE WELL: You should also follow all the steps listed at</em></p>

<p><em># https://devguide.python.org/grammar/</em></p>

<p><em># Start symbols for the grammar:</em></p>

<p><em># single_input is a single interactive statement;</em></p>

<p><em># file_input is a module or sequence of commands read from an input file;</em></p>

<p><em># eval_input is the input for the eval() functions.</em></p>

<p><em># func_type_input is a PEP 484 Python 2 function type comment</em></p>

<p><em># NB: compound_stmt in single_input is followed by extra NEWLINE!</em></p>

<p><em># NB: due to the way TYPE_COMMENT is tokenized it will always be followed by a NEWLINE</em></p>

<table>
  <tbody>
    <tr>
      <td>single_input: NEWLINE</td>
      <td>simple_stmt</td>
      <td>compound_stmt NEWLINE</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>file_input: (NEWLINE</td>
      <td>stmt)* ENDMARKER</td>
    </tr>
  </tbody>
</table>

<p>eval_input: testlist NEWLINE* ENDMARKER</p>

<p>decorator: ‘@’ dotted_name [ ‘(‘ [arglist] ‘)’ ] NEWLINE</p>

<p>decorators: decorator+</p>

<table>
  <tbody>
    <tr>
      <td>decorated: decorators (classdef</td>
      <td>funcdef</td>
      <td>async_funcdef)</td>
    </tr>
  </tbody>
</table>

<p>async_funcdef: ASYNC funcdef</p>

<p>funcdef: ‘def’ NAME parameters [’-&gt;’ test] ‘:’ [TYPE_COMMENT] func_body_suite</p>

<p>parameters: ‘(‘ [typedargslist] ‘)’</p>

<p><em># The following definition for typedarglist is equivalent to this set of rules:</em></p>

<p><em>#</em></p>

<p><em># arguments = argument (‘,’ [TYPE_COMMENT] argument)*</em></p>

<p><em># argument = tfpdef [’=’ test]</em></p>

<p><em># kwargs = ‘**’ tfpdef [’,’] [TYPE_COMMENT]</em></p>

<p><em># args = ‘*’ [tfpdef]</em></p>

<table>
  <tbody>
    <tr>
      <td>*# kwonly_kwargs = (‘,’ [TYPE_COMMENT] argument)* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [kwargs]])*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>*# args_kwonly_kwargs = args kwonly_kwargs</td>
      <td>kwargs*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>*# poskeyword_args_kwonly_kwargs = arguments ( TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [args_kwonly_kwargs]])*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>*# typedargslist_no_posonly = poskeyword_args_kwonly_kwargs</td>
      <td>args_kwonly_kwargs*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>*# typedarglist = (arguments ‘,’ [TYPE_COMMENT] ‘/’ [’,’ [[TYPE_COMMENT] typedargslist_no_posonly]])</td>
      <td>(typedargslist_no_posonly)”*</td>
    </tr>
  </tbody>
</table>

<p><em>#</em></p>

<p><em># It needs to be fully expanded to allow our LL(1) parser to work on it.</em></p>

<p>typedargslist: (</p>

<p>(tfpdef [’=’ test] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* ‘,’ [TYPE_COMMENT] ‘/’ [’,’ [ [TYPE_COMMENT] tfpdef [’=’ test] (</p>

<table>
  <tbody>
    <tr>
      <td>’,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [tfpdef] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [tfpdef] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ tfpdef [’,’] [TYPE_COMMENT]]] )</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>(tfpdef [’=’ test] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [tfpdef] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [tfpdef] (‘,’ [TYPE_COMMENT] tfpdef [’=’ test])* (TYPE_COMMENT</td>
      <td>[’,’ [TYPE_COMMENT] [’**’ tfpdef [’,’] [TYPE_COMMENT]]])</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ tfpdef [’,’] [TYPE_COMMENT])</td>
    </tr>
  </tbody>
</table>

<p>)</p>

<p>tfpdef: NAME [’:’ test]</p>

<p><em># The following definition for varargslist is equivalent to this set of rules:</em></p>

<p><em>#</em></p>

<p><em># arguments = argument (‘,’ argument )*</em></p>

<p><em># argument = vfpdef [’=’ test]</em></p>

<p><em># kwargs = ‘**’ vfpdef [’,’]</em></p>

<p><em># args = ‘*’ [vfpdef]</em></p>

<p><em># kwonly_kwargs = (‘,’ argument )* [’,’ [kwargs]]</em></p>

<table>
  <tbody>
    <tr>
      <td>*# args_kwonly_kwargs = args kwonly_kwargs</td>
      <td>kwargs*</td>
    </tr>
  </tbody>
</table>

<p><em># poskeyword_args_kwonly_kwargs = arguments [’,’ [args_kwonly_kwargs]]</em></p>

<table>
  <tbody>
    <tr>
      <td>*# vararglist_no_posonly = poskeyword_args_kwonly_kwargs</td>
      <td>args_kwonly_kwargs*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>*# varargslist = arguments ‘,’ ‘/’ [’,’[(vararglist_no_posonly)]]</td>
      <td>(vararglist_no_posonly)*</td>
    </tr>
  </tbody>
</table>

<p><em>#</em></p>

<p><em># It needs to be fully expanded to allow our LL(1) parser to work on it.</em></p>

<p>varargslist: vfpdef [’=’ test ](‘,’ vfpdef [’=’ test])* ‘,’ ‘/’ [’,’ [ (vfpdef [’=’ test] (‘,’ vfpdef [’=’ test])* [’,’ [</p>

<p>’*’ [vfpdef] (‘,’ vfpdef [’=’ test])* [’,’ [’**’ vfpdef [’,’]]]</p>

<table>
  <tbody>
    <tr>
      <td>’**’ vfpdef [’,’]]]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [vfpdef] (‘,’ vfpdef [’=’ test])* [’,’ [’**’ vfpdef [’,’]]]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ vfpdef [’,’]) ]]</td>
      <td>(vfpdef [’=’ test] (‘,’ vfpdef [’=’ test])* [’,’ [</td>
    </tr>
  </tbody>
</table>

<p>’*’ [vfpdef] (‘,’ vfpdef [’=’ test])* [’,’ [’**’ vfpdef [’,’]]]</p>

<table>
  <tbody>
    <tr>
      <td>’**’ vfpdef [’,’]]]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [vfpdef] (‘,’ vfpdef [’=’ test])* [’,’ [’**’ vfpdef [’,’]]]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ vfpdef [’,’]</td>
    </tr>
  </tbody>
</table>

<p>)</p>

<p>vfpdef: NAME</p>

<table>
  <tbody>
    <tr>
      <td>stmt: simple_stmt</td>
      <td>compound_stmt</td>
    </tr>
  </tbody>
</table>

<p>simple_stmt: small_stmt (‘;’ small_stmt)* [’;’] NEWLINE</p>

<table>
  <tbody>
    <tr>
      <td>small_stmt: (expr_stmt</td>
      <td>del_stmt</td>
      <td>pass_stmt</td>
      <td>flow_stmt</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>import_stmt</td>
      <td>global_stmt</td>
      <td>nonlocal_stmt</td>
      <td>assert_stmt)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>expr_stmt: testlist_star_expr (annassign</td>
      <td>augassign (yield_expr</td>
      <td>testlist)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>[(‘=’ (yield_expr</td>
      <td>testlist_star_expr))+ [TYPE_COMMENT]] )</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>annassign: ‘:’ test [’=’ (yield_expr</td>
      <td>testlist_star_expr)]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>testlist_star_expr: (test</td>
      <td>star_expr) (‘,’ (test</td>
      <td>star_expr))* [’,’]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>augassign: (‘+=’</td>
      <td>’-=’</td>
      <td>’*=’</td>
      <td>’@=’</td>
      <td>’/=’</td>
      <td>’%=’</td>
      <td>‘&amp;=’</td>
      <td>’</td>
      <td>=’</td>
      <td>’^=’</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’&lt;&lt;=’</td>
      <td>’&gt;&gt;=’</td>
      <td>’**=’</td>
      <td>’//=’)</td>
    </tr>
  </tbody>
</table>

<p><em># For normal and annotated assignments, additional restrictions enforced by the interpreter</em></p>

<p>del_stmt: ‘del’ exprlist</p>

<p>pass_stmt: ‘pass’</p>

<table>
  <tbody>
    <tr>
      <td>flow_stmt: break_stmt</td>
      <td>continue_stmt</td>
      <td>return_stmt</td>
      <td>raise_stmt</td>
      <td>yield_stmt</td>
    </tr>
  </tbody>
</table>

<p>break_stmt: ‘break’</p>

<p>continue_stmt: ‘continue’</p>

<p>return_stmt: ‘return’ [testlist_star_expr]</p>

<p>yield_stmt: yield_expr</p>

<p>raise_stmt: ‘raise’ [test [‘from’ test]]</p>

<table>
  <tbody>
    <tr>
      <td>import_stmt: import_name</td>
      <td>import_from</td>
    </tr>
  </tbody>
</table>

<p>import_name: ‘import’ dotted_as_names</p>

<table>
  <tbody>
    <tr>
      <td>*# note below: the (‘.’</td>
      <td>‘…’) is necessary because ‘…’ is tokenized as ELLIPSIS*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>import_from: (‘from’ ((‘.’</td>
      <td>‘…’)* dotted_name</td>
      <td>(‘.’</td>
      <td>‘…’)+)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>‘import’ (‘*’</td>
      <td>’(‘ import_as_names ‘)’</td>
      <td>import_as_names))</td>
    </tr>
  </tbody>
</table>

<p>import_as_name: NAME [‘as’ NAME]</p>

<p>dotted_as_name: dotted_name [‘as’ NAME]</p>

<p>import_as_names: import_as_name (‘,’ import_as_name)* [’,’]</p>

<p>dotted_as_names: dotted_as_name (‘,’ dotted_as_name)*</p>

<p>dotted_name: NAME (‘.’ NAME)*</p>

<p>global_stmt: ‘global’ NAME (‘,’ NAME)*</p>

<p>nonlocal_stmt: ‘nonlocal’ NAME (‘,’ NAME)*</p>

<p>assert_stmt: ‘assert’ test [’,’ test]</p>

<table>
  <tbody>
    <tr>
      <td>compound_stmt: if_stmt</td>
      <td>while_stmt</td>
      <td>for_stmt</td>
      <td>try_stmt</td>
      <td>with_stmt</td>
      <td>funcdef</td>
      <td>classdef</td>
      <td>decorated</td>
      <td>async_stmt</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>async_stmt: ASYNC (funcdef</td>
      <td>with_stmt</td>
      <td>for_stmt)</td>
    </tr>
  </tbody>
</table>

<p>if_stmt: ‘if’ namedexpr_test ‘:’ suite (‘elif’ namedexpr_test ‘:’ suite)* [‘else’ ‘:’ suite]</p>

<p>while_stmt: ‘while’ namedexpr_test ‘:’ suite [‘else’ ‘:’ suite]</p>

<p>for_stmt: ‘for’ exprlist ‘in’ testlist ‘:’ [TYPE_COMMENT] suite [‘else’ ‘:’ suite]</p>

<p>try_stmt: (‘try’ ‘:’ suite</p>

<p>((except_clause ‘:’ suite)+</p>

<p>[‘else’ ‘:’ suite]</p>

<table>
  <tbody>
    <tr>
      <td>[‘finally’ ‘:’ suite]</td>
    </tr>
  </tbody>
</table>

<p>‘finally’ ‘:’ suite))</p>

<p>with_stmt: ‘with’ with_item (‘,’ with_item)* ‘:’ [TYPE_COMMENT] suite</p>

<p>with_item: test [‘as’ expr]</p>

<p><em># NB compile.c makes sure that the default except clause is last</em></p>

<p>except_clause: ‘except’ [test [‘as’ NAME]]</p>

<table>
  <tbody>
    <tr>
      <td>suite: simple_stmt</td>
      <td>NEWLINE INDENT stmt+ DEDENT</td>
    </tr>
  </tbody>
</table>

<p>namedexpr_test: test [’:=’ test]</p>

<table>
  <tbody>
    <tr>
      <td>test: or_test [‘if’ or_test ‘else’ test]</td>
      <td>lambdef</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>test_nocond: or_test</td>
      <td>lambdef_nocond</td>
    </tr>
  </tbody>
</table>

<p>lambdef: ‘lambda’ [varargslist] ‘:’ test</p>

<p>lambdef_nocond: ‘lambda’ [varargslist] ‘:’ test_nocond</p>

<p>or_test: and_test (‘or’ and_test)*</p>

<p>and_test: not_test (‘and’ not_test)*</p>

<table>
  <tbody>
    <tr>
      <td>not_test: ‘not’ not_test</td>
      <td>comparison</td>
    </tr>
  </tbody>
</table>

<p>comparison: expr (comp_op expr)*</p>

<p><em># &lt;&gt; isn’t actually a valid comparison operator in Python. It’s here for the</em></p>

<p><em># sake of a __future__ import described in PEP 401 (which really works :-)</em></p>

<table>
  <tbody>
    <tr>
      <td>comp_op: ‘&lt;’</td>
      <td>’&gt;’</td>
      <td>’==’</td>
      <td>’&gt;=’</td>
      <td>’&lt;=’</td>
      <td>’&lt;&gt;’</td>
      <td>’!=’</td>
      <td>‘in’</td>
      <td>‘not’ ‘in’</td>
      <td>‘is’</td>
      <td>‘is’ ‘not’</td>
    </tr>
  </tbody>
</table>

<p>star_expr: ‘*’ expr</p>

<table>
  <tbody>
    <tr>
      <td>expr: xor_expr (‘</td>
      <td>’ xor_expr)*</td>
    </tr>
  </tbody>
</table>

<p>xor_expr: and_expr (‘^’ and_expr)*</p>

<p>and_expr: shift_expr (‘&amp;’ shift_expr)*</p>

<table>
  <tbody>
    <tr>
      <td>shift_expr: arith_expr ((‘&lt;&lt;’</td>
      <td>’&gt;&gt;’) arith_expr)*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>arith_expr: term ((‘+’</td>
      <td>’-‘) term)*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>term: factor ((‘*’</td>
      <td>’@’</td>
      <td>’/’</td>
      <td>’%’</td>
      <td>’//’) factor)*</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>factor: (‘+’</td>
      <td>’-‘</td>
      <td>’~’) factor</td>
      <td>power</td>
    </tr>
  </tbody>
</table>

<p>power: atom_expr [’**’ factor]</p>

<p>atom_expr: [AWAIT] atom trailer*</p>

<table>
  <tbody>
    <tr>
      <td>atom: (‘(‘ [yield_expr</td>
      <td>testlist_comp] ‘)’</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’[’ [testlist_comp] ‘]’</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’{‘ [dictorsetmaker] ‘}’</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>NAME</td>
      <td>NUMBER</td>
      <td>STRING+</td>
      <td>‘…’</td>
      <td>‘None’</td>
      <td>‘True’</td>
      <td>‘False’)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>testlist_comp: (namedexpr_test</td>
      <td>star_expr) ( comp_for</td>
      <td>(‘,’ (namedexpr_test</td>
      <td>star_expr))* [’,’] )</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>trailer: ‘(‘ [arglist] ‘)’</td>
      <td>’[’ subscriptlist ‘]’</td>
      <td>’.’ NAME</td>
    </tr>
  </tbody>
</table>

<p>subscriptlist: subscript (‘,’ subscript)* [’,’]</p>

<table>
  <tbody>
    <tr>
      <td>subscript: test</td>
      <td>[test] ‘:’ [test] [sliceop]</td>
    </tr>
  </tbody>
</table>

<p>sliceop: ‘:’ [test]</p>

<table>
  <tbody>
    <tr>
      <td>exprlist: (expr</td>
      <td>star_expr) (‘,’ (expr</td>
      <td>star_expr))* [’,’]</td>
    </tr>
  </tbody>
</table>

<p>testlist: test (‘,’ test)* [’,’]</p>

<table>
  <tbody>
    <tr>
      <td>dictorsetmaker: ( ((test ‘:’ test</td>
      <td>’**’ expr)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>(comp_for</td>
      <td>(‘,’ (test ‘:’ test</td>
      <td>’**’ expr))* [’,’]))</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>((test</td>
      <td>star_expr)</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>(comp_for</td>
      <td>(‘,’ (test</td>
      <td>star_expr))* [’,’])) )</td>
    </tr>
  </tbody>
</table>

<p>classdef: ‘class’ NAME [’(‘ [arglist] ‘)’] ‘:’ suite</p>

<p>arglist: argument (‘,’ argument)* [’,’]</p>

<p><em># The reason that keywords are test nodes instead of NAME is that using NAME</em></p>

<p><em># results in an ambiguity. ast.c makes sure it’s a NAME.</em></p>

<p><em># “test ‘=’ test” is really “keyword ‘=’ test”, but we have no such token.</em></p>

<p><em># These need to be in a single rule to avoid grammar that is ambiguous</em></p>

<p><em># to our LL(1) parser. Even though ‘test’ includes ‘*expr’ in star_expr,</em></p>

<p><em># we explicitly match ‘*’ here, too, to give it proper precedence.</em></p>

<p><em># Illegal combinations and orderings are blocked in ast.c:</em></p>

<p><em># multiple (test comp_for) arguments are blocked; keyword unpackings</em></p>

<p><em># that precede iterable unpackings are blocked; etc.</em></p>

<table>
  <tbody>
    <tr>
      <td>argument: ( test [comp_for]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>test ‘:=’ test</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>test ‘=’ test</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’**’ test</td>
    </tr>
  </tbody>
</table>

<p>’*’ test )</p>

<table>
  <tbody>
    <tr>
      <td>comp_iter: comp_for</td>
      <td>comp_if</td>
    </tr>
  </tbody>
</table>

<p>sync_comp_for: ‘for’ exprlist ‘in’ or_test [comp_iter]</p>

<p>comp_for: [ASYNC] sync_comp_for</p>

<p>comp_if: ‘if’ test_nocond [comp_iter]</p>

<p><em># not used in grammar, but may appear in “node” passed from Parser to Compiler</em></p>

<p>encoding_decl: NAME</p>

<p>yield_expr: ‘yield’ [yield_arg]</p>

<table>
  <tbody>
    <tr>
      <td>yield_arg: ‘from’ test</td>
      <td>testlist_star_expr</td>
    </tr>
  </tbody>
</table>

<p><em># the TYPE_COMMENT in suites is only parsed for funcdefs,</em></p>

<p><em># but can’t go elsewhere due to ambiguity</em></p>

<table>
  <tbody>
    <tr>
      <td>func_body_suite: simple_stmt</td>
      <td>NEWLINE [TYPE_COMMENT NEWLINE] INDENT stmt+ DEDENT</td>
    </tr>
  </tbody>
</table>

<p>func_type_input: func_type NEWLINE* ENDMARKER</p>

<p>func_type: ‘(‘ [typelist] ‘)’ ‘-&gt;’ test</p>

<p><em># typelist is a modified typedargslist (see above)</em></p>

<p>typelist: (test (‘,’ test)* [’,’</p>

<table>
  <tbody>
    <tr>
      <td>[’*’ [test] (‘,’ test)* [’,’ ‘**’ test]</td>
      <td>’**’ test]]</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>’*’ [test] (‘,’ test)* [’,’ ‘**’ test]</td>
      <td>’**’ test)</td>
    </tr>
  </tbody>
</table>

<p>## <br />
A2 JSON LANGUAGE GRAMMER SPECIFICATIONS</p>

<p>{</p>

<p>    ”links”: {</p>

<p>      ”self”: ”http://example.com/articles”,</p>

<p>      ”next”: ”http://example.com/articles?page[offset]=2”,</p>

<p>      ”last”: ”http://example.com/articles?page[offset]=10”</p>

<p>    },</p>

<p>    ”data”: [{</p>

<p>      ”type”: ”articles”,</p>

<p>      ”id”: ”1”,</p>

<p>      ”attributes”: {</p>

<p>        ”title”: ”JSON:API paints my bikeshed!”</p>

<p>      },</p>

<p>      ”relationships”: {</p>

<p>        ”author”: {</p>

<p>          ”links”: {</p>

<p>            ”self”: ”http://example.com/articles/1/relationships/author”,</p>

<p>            ”related”: ”http://example.com/articles/1/author”</p>

<p>          },</p>

<p>          ”data”: { ”type”: ”people”, ”id”: ”9” }</p>

<p>        },</p>

<p>        ”comments”: {</p>

<p>          ”links”: {</p>

<p>            ”self”: ”http://example.com/articles/1/relationships/comments”,</p>

<p>            ”related”: ”http://example.com/articles/1/comments”</p>

<p>          },</p>

<p>          ”data”: [</p>

<p>            { ”type”: ”comments”, ”id”: ”5” },</p>

<p>            { ”type”: ”comments”, ”id”: ”12” }</p>

<p>          ]</p>

<p>        }</p>

<p>      },</p>

<p>      ”links”: {</p>

<p>        ”self”: ”http://example.com/articles/1”</p>

<p>      }</p>

<p>    }],</p>

<p>    ”included”: [{</p>

<p>      ”type”: ”people”,</p>

<p>      ”id”: ”9”,</p>

<p>      ”attributes”: {</p>

<p>        ”firstName”: ”Dan”,</p>

<p>        ”lastName”: ”Gebhardt”,</p>

<p>        ”twitter”: ”dgeb”</p>

<p>      },</p>

<p>      ”links”: {</p>

<p>        ”self”: ”http://example.com/people/9”</p>

<p>      }</p>

<p>    }, {</p>

<p>      ”type”: ”comments”,</p>

<p>      ”id”: ”5”,</p>

<p>      ”attributes”: {</p>

<p>        ”body”: ”First!”</p>

<p>      },</p>

<p>      ”relationships”: {</p>

<p>        ”author”: {</p>

<p>          ”data”: { ”type”: ”people”, ”id”: ”2” }</p>

<p>        }</p>

<p>      },</p>

<p>      ”links”: {</p>

<p>        ”self”: ”http://example.com/comments/5”</p>

<p>      }</p>

<p>    }, {</p>

<p>      ”type”: ”comments”,</p>

<p>      ”id”: ”12”,</p>

<p>      ”attributes”: {</p>

<p>        ”body”: ”I like XML better”</p>

<p>      },</p>

<p>      ”relationships”: {</p>

<p>        ”author”: {</p>

<p>          ”data”: { ”type”: ”people”, ”id”: ”9” }</p>

<p>        }</p>

<p>      },</p>

<p>      ”links”: {</p>

<p>        ”self”: ”http://example.com/comments/12”</p>

<p>      }</p>

<p>    }]</p>

<p>  }</p>

<h1 id="appendix-b">Appendix B</h1>

<h1 id="sample-source-code-and-output-listing">Sample source code and output listing</h1>

<h2 id="b1-commands-code-for-the-bot-and-replies">B1 COMMANDS CODE FOR THE BOT AND REPLIES</h2>

<p>{</p>

<p>    ”start”: [</p>

<p>        ”Greetings {}!”,</p>

<p>        ””,</p>

<p>        ”You just found @Coronaviruskenyabot \uD83E\uDDA0. This bot gives you up-to-date information on Kenya and worldwide spread of the Covid-19 disease.”,</p>

<p>        ””,</p>

<p>        ”To get a quick overview of the current status, try /today ,/kenya or /world.”,</p>

<p>        ”You can view detailed statistics of your country by using the /list command.”,</p>

<p>        ”Subscribe to daily updates with /subscribe for automatic notifications.”,</p>

<p>        ”*MAKE SURE TO USE THE /setcountry COMMAND TO SET YOUR COUNNTRY FOLLOWED BY /subscribe TO GET DAILY NOTIFICATIONS*”,</p>

<p>        ””,</p>

<p>        ”*To get the FAQs about corona virus disease* use /faqs”,</p>

<p>        ””,</p>

<p>        ”*You have no idea what COVID-19 is or having doubts* use /faqs”,</p>

<p>        ””,</p>

<p>        ”For more, see /help.”</p>

<p>    ],</p>

<p>    ”donate”:[</p>

<p>        ”\uD83E\uDDA0 @Coronaviruskenyabot  *Donate*  *#STAYSAFE*”,</p>

<p>        ”Donate to this project for  more exclusive platforms such as WhatsApp.\n”,</p>

<p>        ”*If you’d like to donate do it* [HERE](https://mikeowino.com/donation)”</p>

<p>    ],</p>

<p>    ”help”: [</p>

<p>        ”\uD83E\uDDA0 @Coronaviruskenyabot Help *#STAYSAFE*”,</p>

<p>        ””,</p>

<p>        ”This bot gives you up-to-date information on the worldwide spread of the COVID-19 disease.”,</p>

<p>        ””,</p>

<p>        ”*/world*  \u2022  Worldwide case statistics.”,</p>

<p>        ”*/today*  \u2022  Summary of today’s cases.”,</p>

<p>        ”*/list*  \u2022  List of countries ordered by number of cases.”,</p>

<p>        ”*/subscribe*  \u2022  Subscribe to daily status updates with new case statistics.”,</p>

<p>        ”*/help*  \u2022  Show this help.”,</p>

<p>        ””,</p>

<p>        ”You can use this bot in any chat or group without adding it by typing `@Coronaviruskenyabot [country]`.”,</p>

<p>        ””,</p>

<p>        ”—”,</p>

<p>        ”\u2139\uFE0F For issues and feedback, [Contact Me](https://t.me/decipha).\n”,</p>

<p>        ”Sources: [WORLDOMETERS](https://www.worldometers.info/coronavirus/country/kenya/), [WHO](https://covid19.who.int), [MOH](https://twitter.com/MOH_Kenya).\n”,</p>

<p>        ”Data is accessed via [NovelCOVID API](https://github.com/NovelCOVID/API).”</p>

<p>    ],</p>

<p>    ”faqs”: [</p>

<p>        ”\uD83E\uDDA0 @Coronaviruskenyabot FAQs *#STAYSAFE*”,</p>

<p>        ””,</p>

<p>        ”*From the Government*”,</p>

<p>        ””,</p>

<p>        ”*IF YOU FEEL UNWELL, HAVE A COLD, A COUGH OR FEVER, PLEASE CALL* 719 *OR TEXT* 719”,</p>

<p>        ””,</p>

<p>        ”*What is a Coronavirus ?*”,</p>

<p>        ”Coronaviruses are a large family of viruses that are known to cause illness ranging from the common cold to more severe diseases such as Middle East Respiratory Syndrome (MERS) and Severe Acute Respiratory Syndrome (SARS).”,</p>

<p>        ””,</p>

<p>        ”*What is novel coronavirus ?*”,</p>

<p>        ”A novel coronavirus (CoV) is a new strain of coronavirus that has not been previously identified in humans.”,</p>

<p>        ””,</p>

<p>        ”*Can humans get infected from novel coronavirus from animal source ?*”,</p>

<p>        ”Coronaviruses are a large family of viruses that are common in animals. Occasionally, people get infected with these viruses which may then spread to other people.Possible animal sources of COVID-19 have not yet been confirmed.”,</p>

<p>        ”To protect yourself, such as when visiting live animal markets, avoid direct contact with animals and surfaces in contact with animals. Ensure good food safety practices at all times. Handle raw meat, milk or animal organs with care to avoid contamination of uncooked foods and avoid consuming raw or undercooked animal products.”,</p>

<p>        ””,</p>

<p>        ”*What are the symptoms of COVID-19 ?*”,</p>

<p>        ”common signs include respiratory *symptoms, fever, cough, shortness of breath, and breathing difficulties.* In more severe cases, infection can cause *pneumonia, severe acute respiratory syndrome, kidney failure and even death.*”,</p>

<p>        ””,</p>

<p>        ”*Can the virus that causes COVID-19 be transmitted through the air ?*”,</p>

<p>        ”Studies to date suggest that the virus that causes COVID-19 is mainly transmitted through contact with respiratory droplets rather than through the air”,</p>

<p>        ””,</p>

<p>        ”*Is there a vaccine for novel coronavirus ?*”,</p>

<p>        ”Not yet. To date, there is no vaccine and no specific antiviral medicine to prevent or treat COVID-2019. However, those affected should receive care to relieve symptoms. People with serious illness should be hospitalized. Most patients recover thanks to supportive care.”</p>

<p>    </p>

<p>    ],</p>

<p>    ”today”: [</p>

<p>        ”\uD83D\uDCDD Status on {:%Y-%m-%d} at {:%H:%m} UTC *#STAYSAFE*”,</p>

<p>        ””,</p>

<p>        ”\uD83C\uDF10 Worldwide, `{:,}` COVID-19 infections have been reported. `{:,}` infected people died.”,</p>

<p>        ”\uD83E\uDDA0 Today, there have been `{:,}` new cases.”,</p>

<p>        ”\u26B0\uFE0F The number of deaths since 0:00 UTC is `{:,}`.”,</p>

<p>        ”More: /world”,</p>

<p>        ””</p>

<p>    ],</p>

<p>    ”today_country”: [</p>

<p>        ”{} In {}, `{:,}` infections have been reported. `{:,}` infected people died.”,</p>

<p>        ”\uD83E\uDDA0 Today, there have been `{:,}` new cases.”,</p>

<p>        ”\u26B0\uFE0F The number of deaths since 0:00 UTC is `{:,}`.”,</p>

<p>        ”More: /{}”,</p>

<p>        ””</p>

<p>    ],</p>

<p>    ”today_footer”: ”/list  \u2022  /setcountry  \u2022  /help”,</p>

<p>    ”stats_table”: [</p>

<p>        ”COVID-19 Statistics for *{}* {}”,</p>

<p>        ””,</p>

<p>        ”\uD83E\uDDA0  `{:,}`  estimated cases”,</p>

<p>        ”\uD83C\uDF21  `{:,}`  active (`{:.1%}`)”,</p>

<p>        ”\uD83D\uDD06  `{:,}`  recovered (`{:.1%}`)”,</p>

<p>        ”\u26B0\uFE0F  `{:,}`  deaths (`{:.1%}`)”,</p>

<p>        ””,</p>

<p>        ”_Today_ \uD83D\uDCC6”,</p>

<p>        ”\uD83E\uDDA0  `+ {:,}`  new cases”,</p>

<p>        ”\u26B0\uFE0F  `+ {:,}`  deaths”,</p>

<p>        ””</p>

<p>    ],</p>

<p>    ”stats_table_more”: [</p>

<p>        ”\uD83D\uDC65  `{:,}`  cases per million people”,</p>

<p>        ”\uD83D\uDC65  `{:,}` deaths per million people”,</p>

<p>        ””</p>

<p>    ],</p>

<p>    ”stats_table_simple”: [</p>

<p>        ”COVID-19 Statistics for *{}* {}”,</p>

<p>        ””,</p>

<p>        ”\uD83E\uDDA0  `{:,}`  estimated cases”,</p>

<p>        ”\u26B0\uFE0F  `{:,}`  deaths (`{:.1%}`)”,</p>

<p>        ””</p>

<p>    ],</p>

<p>    ”stats_updated”: ”_Updated: {:%Y-%m-%d %H:%m} UTC_”,</p>

<p>    ”stats_more”: ”More”,</p>

<p>    ”stats_less”: ”Less”,</p>

<p>    ”more”: ”More: @Coronaviruskenyabot”,</p>

<p>    ”page_left”: ”\u25C0\uFE0F Page {}”,</p>

<p>    ”page_right”: ”Page {} \u25B6\uFE0F”,</p>

<p>    ”to_start”: ”\u23EA To Start”,</p>

<p>    ”to_end”: ”To End \u23E9”,</p>

<p>    ”list_header”: ”\uD83D\uDCCA Countries by *{}*\n”,</p>

<p>    ”no_data”: ”Sorry, no data available! Try again later.”,</p>

<p>    ”unknown_place”: ”Please use the available commands to get a reply.”,</p>

<p>    ”no_country_set”: ”IFf you have not configured your country. Use /setcountry to configure it.”,</p>

<p>    ”setcountry_start”: [</p>

<p>        ”To set your country, send your country name.”,</p>

<p>        ”Send /cancel to cancel.”</p>

<p>    ],</p>

<p>    ”cancel”: ”Cancelled.”,</p>

<p>    ”setcountry_success”: ”Successfully set your country to *{}*.”,</p>

<p>    ”subscribe”: [</p>

<p>        ”You have subscribed to daily case updates.”,</p>

<p>        ”To unsubscribe, send /unsubscribe.”</p>

<p>    ],</p>

<p>    ”unsubscribe”: [</p>

<p>        ”You have unsubscribed from daily updates.”,</p>

<p>        ”To re-subscribe, send /subscribe.”</p>

<p>    ],</p>

<p>    ”sort_order”: ”Sort order \uD83D\uDCCA”,</p>

<p>    ”back”: ”\u25C0\uFE0F Back”,</p>

<p>    ”sort_order_cases”: ”\uD83E\uDDA0 total”,</p>

<p>    ”sort_order_casesPerOneMillion”: ”\uD83E\uDDA0 / million”,</p>

<p>    ”sort_order_todayCases”: ”\uD83E\uDDA0 today”,</p>

<p>    ”sort_order_deaths”: ”\u26B0\uFE0F total”,</p>

<p>    ”sort_order_deathsPerOneMillion”: ”\u26B0\uFE0F / million”,</p>

<p>    ”sort_order_todayDeaths”: ”\u26B0\uFE0F today”</p>

<p>}</p>

<p>##</p>

<h2 id="b2-code-for-accessing-the-covid-19-api-servers">B2 CODE FOR ACCESSING THE COVID-19 API SERVERS</h2>

<p>import requests</p>

<p>BASE_URL=”https://corona.lmao.ninja/v2/”</p>

<p>class CovidApi:</p>

<p>    ”"”A simple wrapper for the NovelCOVID API (https://github.com/NovelCOVID/API).</p>

<p>    ”””</p>

<p>    def __init__(self):</p>

<p>        self.countries = self._all_countries()</p>

<p>        self.name_map = self._build_name_map(self.countries)</p>

<p>        self.us_states = self._all_us_states()</p>

<p>        self.de_states = self._all_de_states()</p>

<p>    def _clean(self, s):</p>

<p>        s = s.replace(‘\xad’, ’’)</p>

<p>        s = s.replace(‘\n’, ’’)</p>

<p>        return s</p>

<p>    def _build_name_map(self, countries):</p>

<p>        name_map = {}</p>

<p>        for iso2, country in countries.items():</p>

<p>            name_map[country[‘iso2’].lower()] = iso2</p>

<p>            name_map[country[‘iso3’].lower()] = iso2</p>

<p>            name_map[country[‘name’].lower()] = iso2</p>

<p>        return name_map</p>

<p>    def _all_countries(self):</p>

<p>        response = requests.get(BASE_URL+”countries”)</p>

<p>        if response.status_code == 200:</p>

<p>            countries = {}</p>

<p>            for item in response.json():</p>

<p>                iso2 = item[‘countryInfo’][‘iso2’]</p>

<p>                if iso2:</p>

<p>                    countries[iso2] = item[‘countryInfo’]</p>

<p>                    countries[iso2][‘name’] = item[‘country’]</p>

<p>            return countries</p>

<p>        else:</p>

<p>            return {}</p>

<p>    def _all_us_states(self):</p>

<p>        response = requests.get(BASE_URL+”states”)</p>

<p>        if response.status_code == 200:</p>

<p>            countries = []</p>

<p>            for item in response.json():</p>

<p>                countries.append(item[‘state’])</p>

<p>            return countries</p>

<p>        else:</p>

<p>            return []</p>

<p>    def _all_de_states(self):</p>

<p>        response = requests.get(BASE_URL+”gov/de”)</p>

<p>        if response.status_code == 200:</p>

<p>            countries = []</p>

<p>            for item in response.json():</p>

<p>                if item[‘province’].lower() != ’total’:</p>

<p>                    countries.append(self._clean(item[‘province’]))</p>

<p>            return countries</p>

<p>        else:</p>

<p>            return []</p>

<p>    def cases_world(self):</p>

<p>        response = requests.get(BASE_URL+”all”)</p>

<p>        if response.status_code == 200:</p>

<p>            return response.json()</p>

<p>        else:</p>

<p>            return None</p>

<p>    def cases_country_list(self, sort_by=”cases”):</p>

<p>        response = requests.get(BASE_URL+”countries”, params={‘sort’: sort_by})</p>

<p>        if response.status_code == 200:</p>

<p>            return [item for item in response.json() if item[‘countryInfo’][‘iso2’]]</p>

<p>        else:</p>

<p>            return []</p>

<p>    def cases_country(self, country):</p>

<p>        country_code = self.name_map[country.lower()]</p>

<p>        response = requests.get(BASE_URL+”countries/{}”.format(country_code))</p>

<p>        if response.status_code == 200:</p>

<p>            data = response.json()</p>

<p>            del data[‘countryInfo’]</p>

<p>            return data</p>

<p>        else:</p>

<p>            return None</p>

<p>    def cases_us_state(self, state):</p>

<p>        response = requests.get(BASE_URL+”states/{}”.format(state))</p>

<p>        if response.status_code == 200:</p>

<p>            data = response.json()</p>

<p>            # additions to unify format with countries</p>

<p>            data[‘recovered’] = data[‘cases’] - data[‘active’] - data[‘deaths’]</p>

<p>            return data</p>

<p>        else:</p>

<p>            return None</p>

<p>    def cases_de_state(self, state):</p>

<p>        response = requests.get(BASE_URL+”gov/de”)</p>

<p>        if response.status_code == 200:</p>

<p>            data = response.json()</p>

<p>            filtered = [item for item in data if self._clean(item[‘province’].lower()) == state.lower()]</p>

<p>            return filtered[0] if len(filtered) &gt; 0 else None</p>

<p>        else:</p>

<p>            return None</p>

<h2 id="b3-main-source-code-of-the-bot-including-access-to-the-bot-api-token-and-notify-time-for-sending-the-daily-notifications">B3 MAIN SOURCE CODE OF THE BOT INCLUDING ACCESS TO THE BOT API TOKEN AND NOTIFY TIME FOR SENDING THE DAILY NOTIFICATIONS</h2>

<p>#!/usr/bin/env python3</p>

<p>from datetime import datetime</p>

<p>import json</p>

<p>import logging</p>

<p>import re</p>

<p>import requests</p>

<p>from time import sleep</p>

<p>from telegram import ParseMode</p>

<p>from telegram import InlineKeyboardButton, InlineKeyboardMarkup, InlineQueryResultArticle, InputTextMessageContent</p>

<p>from telegram.ext import Updater, CommandHandler, CallbackQueryHandler, MessageHandler, Filters, InlineQueryHandler</p>

<p>from telegram.ext import PicklePersistence, ConversationHandler, DispatcherHandlerStop</p>

<p>from telegram.error import TelegramError</p>

<p>from statistics_api import CovidApi</p>

<p>import wikidata</p>

<p>from resources.resolver import resolve</p>

<p>from utils import *</p>

<p>CONFIG_FILE=”config.json”</p>

<p>logging.basicConfig(format=’%(asctime)s - %(name)s - %(levelname)s - %(message)s’,</p>

<p>                    level=logging.INFO)</p>

<p>logger = logging.getLogger(__name__)</p>

<p>WORLD_IDENT=”world”</p>

<p>api = CovidApi()</p>

<p># command /start</p>

<p>def command_start(update, context):</p>

<p>    update.message.reply_markdown(resolve(‘start’, lang(update), update.message.from_user.first_name))</p>

<p>#command /faqs</p>

<p>def command_faqs(update, context):</p>

<p>    update.message.reply_markdown(resolve(‘faqs’, lang(update)), disadle_web_page_preview=True)</p>

<p>#command /donate</p>

<p>def command_donate(update, context):</p>

<p>    update.message.reply_markdown(resolve(‘donate’, lang(update)), disable_web_page_preview=True)</p>

<p># command /help</p>

<p>@handler_decorator</p>

<p>def command_help(update, context):</p>

<p>    update.message.reply_markdown(resolve(‘help’, lang(update)), disable_web_page_preview=True)</p>

<p>### World &amp; country stats + status report ###</p>

<p>def format_stats(update, code, data, icon=None, detailed=False):</p>

<p>    if code in api.countries:</p>

<p>        name = api.countries[code][‘name’]</p>

<p>    elif code == WORLD_IDENT:</p>

<p>        name = ”the World”</p>

<p>        icon = ’\U0001f310’</p>

<p>    else:</p>

<p>        name = code</p>

<p>    if not icon:</p>

<p>        icon = flag(code)</p>

<p>    p_dead = data[‘deaths’] / data[‘cases’]</p>

<p>    if ’active’ in data and ’todayCases’ in data: # we have detailed data, so use more detailed view</p>

<p>        p_active = data[‘active’] / data[‘cases’]</p>

<p>        p_recov = data[‘recovered’] / data[‘cases’]</p>

<p>        text = resolve(‘stats_table’, lang(update), name, icon, data[‘cases’],</p>

<p>                data[‘active’], p_active, data[‘recovered’], p_recov, data[‘deaths’], p_dead,</p>

<p>                data[‘todayCases’], data[‘todayDeaths’])</p>

<p>        if detailed:</p>

<p>            text += ’\n’+resolve(‘stats_table_more’, lang(update), data[‘casesPerOneMillion’] or 0,</p>

<p>                            data[‘deathsPerOneMillion’] or 0)</p>

<p>    else: # we only have limited data</p>

<p>        text = resolve(‘stats_table_simple’, lang(update), name, icon, data[‘cases’], data[‘deaths’], p_dead)</p>

<p>    text += ’\n’+resolve(‘stats_updated’, lang(update), datetime.utcfromtimestamp(data[‘updated’] / 1e3))</p>

<p>    return text</p>

<p>def get_stats_keyboard(update, country_code, is_detailed=False):</p>

<p>    keyboard = [[]]</p>

<p>    caption_key = ’stats_more’ if not is_detailed else ’stats_less’</p>

<p>    caption = resolve(caption_key, lang(update))</p>

<p>    keyboard[0].append(InlineKeyboardButton(caption,</p>

<p>                    callback_data=”stats {} {}”.format(country_code, 1 if is_detailed else 0)))</p>

<p>    return InlineKeyboardMarkup(keyboard)</p>

<p># the text used for daily notifications and /today</p>

<p>def get_status_report(country_code=None, lang=”en”):</p>

<p>    data = api.cases_world()</p>

<p>    if data:</p>

<p>        dt = datetime.utcfromtimestamp(data[‘updated’] / 1e3)</p>

<p>        text = resolve(‘today’, lang,</p>

<p>                dt, dt, data[‘cases’], data[‘deaths’], data[‘todayCases’], data[‘todayDeaths’])</p>

<p>        # fetch data of home country if set</p>

<p>        if country_code:</p>

<p>            country_data = api.cases_country(country_code)</p>

<p>            text += ’\n’+resolve(‘today_country’, lang, flag(country_code),</p>

<p>                            api.countries[country_code][‘name’], country_data[‘cases’], country_data[‘deaths’],</p>

<p>                            country_data[‘todayCases’], country_data[‘todayDeaths’], country_code.lower())</p>

<p>        else:</p>

<p>            text += ’\n_‘+resolve(‘no_country_set’, lang)+’_\n’</p>

<p>        text += ’\n’+resolve(‘today_footer’, lang)</p>

<p>    else:</p>

<p>        text = resolve(‘no_data’,lang)</p>

<p>    return text</p>

<p># command /today</p>

<p>@handler_decorator</p>

<p>def command_today(update, context):</p>

<p>    if ’country’ in context.chat_data:</p>

<p>        country_code = context.chat_data[‘country’]</p>

<p>    else:</p>

<p>        country_code = None</p>

<p>    text = get_status_report(country_code, lang(update))</p>

<p>    update.message.reply_markdown(text)</p>

<p>def format_list_item(data, order):</p>

<p>    code = data[‘countryInfo’][‘iso2’].lower()</p>

<p>    icon = resolve(‘sort_order_‘+order, None).split(‘ ’)[0]</p>

<p>    number = data[order]</p>

<p>    text = ”””</p>

<p>{} *{}  -  {}*  -  {} `{:,}`</p>

<p>    ””“.format(flag(code), data[‘country’], ’/’+code, icon, number)</p>

<p>    return text</p>

<p>def get_list_keyboard(update, current_index, limit, last=False):</p>

<p>    keyboard = [[]]</p>

<p>    if current_index &gt; 0:</p>

<p>        keyboard[0].append(InlineKeyboardButton(resolve(‘page_left’, lang(update), current_index),</p>

<p>                                callback_data=”list {} {}”.format(current_index-1, limit)))</p>

<p>    if not last:</p>

<p>        keyboard[0].append(InlineKeyboardButton(resolve(‘page_right’, lang(update), current_index+2),</p>

<p>                                callback_data=”list {} {}”.format(current_index+1, limit)))</p>

<p>    if current_index &gt; 0:</p>

<p>        keyboard.append([</p>

<p>            InlineKeyboardButton(resolve(‘to_start’, lang(update)), callback_data=”list 0 {}”.format(limit))])</p>

<p>    else:</p>

<p>        keyboard.append([</p>

<p>            InlineKeyboardButton(resolve(‘to_end’, lang(update)), callback_data=”list -1 {}”.format(limit))])</p>

<p>    keyboard.append([</p>

<p>        InlineKeyboardButton(resolve(‘sort_order’, lang(update)),</p>

<p>                callback_data=”list_order_menu 1 ({} {} {})”.format(current_index, limit, int(last)))</p>

<p>    ])</p>

<p>    return InlineKeyboardMarkup(keyboard)</p>

<p>SORT_ORDERS = [‘cases’, ’deaths’, ’casesPerOneMillion’, ’deathsPerOneMillion’, ’todayCases’, ’todayDeaths’]</p>

<p>def get_list_order_keyboard(update, current_index, limit, last=False):</p>

<p>    keyboard = []</p>

<p>    for i, sort_order in enumerate(SORT_ORDERS):</p>

<p>        button = InlineKeyboardButton(resolve(“sort_order_“+sort_order, lang(update)), callback_data=”list_order {} {}”.format(sort_order, limit))</p>

<p>        if i % 2 == 0:</p>

<p>            l = [button]</p>

<p>        else:</p>

<p>            l.append(button)</p>

<p>            keyboard.append(l)</p>

<p>    keyboard.append([InlineKeyboardButton(resolve(‘back’, lang(update)),</p>

<p>                callback_data=”list_order_menu 0 ({} {} {})”.format(current_index, limit, int(last)))])</p>

<p>    return InlineKeyboardMarkup(keyboard)</p>

<p># command /world</p>

<p>@handler_decorator</p>

<p>def command_world(update, context):</p>

<p>    photo_file = wikidata.cases_world_map()</p>

<p>    data = api.cases_world()</p>

<p>    if data:</p>

<p>        text = format_stats(update, WORLD_IDENT, data)</p>

<p>        update.message.reply_photo(photo=photo_file, caption=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                   reply_markup=get_stats_keyboard(update, WORLD_IDENT))</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘no_data’, lang(update)))</p>

<p># command /[country]</p>

<p>@handler_decorator</p>

<p>def command_country(update, context, country_code):</p>

<p>    photo_file = wikidata.cases_country_map(country_code)</p>

<p>    data = api.cases_country(country_code)</p>

<p>    if data:</p>

<p>        text = format_stats(update, country_code, data)</p>

<p>        if photo_file:</p>

<p>            update.message.reply_photo(photo=photo_file, caption=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                       reply_markup=get_stats_keyboard(update, country_code))</p>

<p>        else:</p>

<p>            update.message.reply_markdown(text, reply_markup=get_stats_keyboard(update, country_code))</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘no_data’, lang(update)))</p>

<p>def command_us_state(update, context, state):</p>

<p>    data = api.cases_us_state(state)</p>

<p>    if data:</p>

<p>        text = format_stats(update, state.title(), data, icon=’\uD83C\uDDFA\uD83C\uDDF8’)</p>

<p>        update.message.reply_markdown(text)</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘no_data’, lang(update)))</p>

<p>def command_de_state(update, context, state):</p>

<p>    data = api.cases_de_state(state)</p>

<p>    if data:</p>

<p>        text = format_stats(update, state.title(), data, icon=’\uD83C\uDDE9\uD83C\uDDEA’)</p>

<p>        update.message.reply_markdown(text)</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘no_data’, lang(update)))</p>

<p>def callback_stats(update, context):</p>

<p>    query = update.callback_query</p>

<p>    country_code = context.match.group(1)</p>

<p>    # True if we want to *show* detailed mode, False otherwise</p>

<p>    is_detailed = not bool(int(context.match.group(2)))</p>

<p>    if country_code == WORLD_IDENT:</p>

<p>        data = api.cases_world()</p>

<p>    else:</p>

<p>        data = api.cases_country(country_code)</p>

<p>    if data:</p>

<p>        text = format_stats(update, country_code, data, detailed=is_detailed)</p>

<p>        if query.message.caption:</p>

<p>            query.edit_message_caption(caption=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                       reply_markup=get_stats_keyboard(update, country_code, is_detailed))</p>

<p>        else:</p>

<p>            query.edit_message_text(text=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                    reply_markup=get_stats_keyboard(update, country_code, is_detailed))</p>

<p>### Country list ###</p>

<p># command /list</p>

<p>@handler_decorator</p>

<p>def command_list(update, context):</p>

<p>    # set or retrieve sort order</p>

<p>    if len(context.args) &gt; 0:</p>

<p>        order = context.args[0]</p>

<p>        context.chat_data[‘order’] = order</p>

<p>    elif ’order’ in context.chat_data:</p>

<p>        order = context.chat_data[‘order’]</p>

<p>    else:</p>

<p>        # use first possible order as default</p>

<p>        order = SORT_ORDERS[0]</p>

<p>        context.chat_data[‘order’] = order</p>

<p>    # by default, return 7 items. min 2 and max 20.</p>

<p>    limit = int(context.args[1]) if len(context.args) &gt; 1 else 7</p>

<p>    limit = min(max(2, limit), 20)</p>

<p>    case_list = api.cases_country_list(sort_by=order)[:limit]</p>

<p>    if len(case_list) &gt; 0:</p>

<p>        text = resolve(‘list_header’, lang(update), resolve(“sort_order_“+order, lang(update)))</p>

<p>        for item in case_list:</p>

<p>            text += format_list_item(item, order)</p>

<p>        update.message.reply_markdown(text, reply_markup=get_list_keyboard(update, 0, limit))</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘no_data’, lang(update)))</p>

<p>def callback_list_pages(update, context):</p>

<p>    query = update.callback_query</p>

<p>    order = context.chat_data.get(‘order’, SORT_ORDERS[0]) # for backward comp</p>

<p>    page, limit = int(context.match.group(1)), int(context.match.group(2))</p>

<p>    case_list = api.cases_country_list(sort_by=order)</p>

<p>    if page &gt;= 0:</p>

<p>        case_list = case_list[page*limit:(page+1)*limit]</p>

<p>    else:</p>

<p>        # if the given page number is negative, we want to access the last page</p>

<p>        page = len(case_list) // limit</p>

<p>        offset = len(case_list) % limit</p>

<p>        case_list = case_list[-offset:]</p>

<p>    query.answer()</p>

<p>    if len(case_list) &gt; 0:</p>

<p>        text = resolve(‘list_header’, lang(update), resolve(“sort_order_“+order, lang(update)))</p>

<p>        for item in case_list:</p>

<p>            text += format_list_item(item, order)</p>

<p>        query.edit_message_text(text=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                reply_markup=get_list_keyboard(update, page, limit, len(case_list) &lt; limit))</p>

<p>    else:</p>

<p>        query.edit_message_text(resolve(‘no_data’, lang(update)),</p>

<p>                                reply_markup=get_list_keyboard(update, page, limit, len(case_list) &lt; limit))</p>

<p>def callback_list_order_menu(update, context):</p>

<p>    query = update.callback_query</p>

<p>    on = int(context.match.group(1))</p>

<p>    payload = [int(g) for g in context.match.group(2).split(“ ”)]</p>

<p>    query.answer()</p>

<p>    if on:</p>

<p>        query.edit_message_reply_markup(reply_markup=get_list_order_keyboard(update, *payload))</p>

<p>    else:</p>

<p>        query.edit_message_reply_markup(reply_markup=get_list_keyboard(update, *payload))</p>

<p>def callback_list_order(update, context):</p>

<p>    query = update.callback_query</p>

<p>    order = context.match.group(1)</p>

<p>    # save the selected order</p>

<p>    context.chat_data[‘order’] = order</p>

<p>    limit = int(context.match.group(2))</p>

<p>    case_list = api.cases_country_list(sort_by=order)[:limit]</p>

<p>    query.answer()</p>

<p>    if len(case_list) &gt; 0:</p>

<p>        text = resolve(‘list_header’, lang(update), resolve(“sort_order_“+order, lang(update)))</p>

<p>        for item in case_list:</p>

<p>            text += format_list_item(item, order)</p>

<p>        query.edit_message_text(text=text, parse_mode=ParseMode.MARKDOWN,</p>

<p>                                reply_markup=get_list_keyboard(update, 0, limit, len(case_list) &lt; limit))</p>

<p>    else:</p>

<p>        query.edit_message_text(resolve(‘no_data’, lang(update)),</p>

<p>                                reply_markup=get_list_keyboard(update, 0, limit, len(case_list) &lt; limit))</p>

<p>### Free text &amp; inline ###</p>

<p># free text input</p>

<p>@handler_decorator</p>

<p>def handle_text(update, context):</p>

<p>    query_string = update.message.text.lower()</p>

<p>    if query_string in api.name_map:</p>

<p>        command_country(update, context, api.name_map[query_string])</p>

<p>    elif WORLD_IDENT in query_string:</p>

<p>        command_world(update, context)</p>

<p>    elif check_flag(query_string):</p>

<p>        code = code_from_flag(query_string).lower()</p>

<p>        if code in api.name_map:</p>

<p>            command_country(update, context, api.name_map[code])</p>

<p>    elif query_string.title() in api.us_states:</p>

<p>        command_us_state(update, context, query_string)</p>

<p>    elif query_string.title() in api.de_states:</p>

<p>        command_de_state(update, context, query_string)</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘unknown_place’, lang(update)))</p>

<p># inline queries</p>

<p>def handle_inlinequery(update, context):</p>

<p>    inline_query = update.inline_query</p>

<p>    query_string = inline_query.query.lower()</p>

<p>    if not query_string:</p>

<p>        return</p>

<p>    results = []</p>

<p>    # a special case matching ’world’</p>

<p>    if WORLD_IDENT.startswith(query_string):</p>

<p>        results.append((WORLD_IDENT, WORLD_IDENT))</p>

<p>    for name in api.name_map.keys():</p>

<p>        if name.startswith(query_string):</p>

<p>            results.append((name, ”country”))</p>

<p>        # limit to the first threee results</p>

<p>        if len(results) &gt;= 3:</p>

<p>            break</p>

<p>    if len(results) &lt; 3:</p>

<p>        for state in api.us_states:</p>

<p>            if state.lower().startswith(query_string):</p>

<p>                results.append((state.lower(), ”us_state”))</p>

<p>            if len(results) &gt;= 3:</p>

<p>                break</p>

<p>    if len(results) &lt; 3:</p>

<p>        for state in api.de_states:</p>

<p>            if state.lower().startswith(query_string):</p>

<p>                results.append((state.lower(), ”de_state”))</p>

<p>            if len(results) &gt;= 3:</p>

<p>                break</p>

<p>    query_results = []</p>

<p>    for i,(s, t) in enumerate(results):</p>

<p>        if t == WORLD_IDENT:</p>

<p>            data = api.cases_world()</p>

<p>            text = format_stats(update, WORLD_IDENT, data, detailed=True)</p>

<p>        elif t == ”us_state”:</p>

<p>            data = api.cases_us_state(s)</p>

<p>            text = format_stats(update, s.title(), data, icon=’\uD83C\uDDFA\uD83C\uDDF8’)</p>

<p>        elif t == ”de_state”:</p>

<p>            data = api.cases_de_state(s)</p>

<p>            text = format_stats(update, s.title(), data, icon=’\uD83C\uDDE9\uD83C\uDDEA’)</p>

<p>        else:</p>

<p>            country_code = api.name_map[s]</p>

<p>            data = api.cases_country(country_code)</p>

<p>            text = format_stats(update, country_code, data, detailed=True)</p>

<p>        text+=’\n’+resolve(‘more’, lang(update))</p>

<p>        result_content = InputTextMessageContent(text, parse_mode=ParseMode.MARKDOWN)</p>

<p>        query_results.append(</p>

<p>            InlineQueryResultArticle(id=i, title=s, input_message_content=result_content)</p>

<p>        )</p>

<p>    inline_query.answer(query_results)</p>

<p>### Set country ###</p>

<p># command /setcountry</p>

<p>@handler_decorator</p>

<p>def handle_setcountry_start(update, context):</p>

<p>    update.message.reply_markdown(resolve(‘setcountry_start’, lang(update)))</p>

<p>    return 1</p>

<p>def handle_setcountry_input(update, context):</p>

<p>    query_string = update.message.text.lower()</p>

<p>    if query_string in api.name_map:</p>

<p>        code = api.name_map[query_string]</p>

<p>        context.chat_data[‘country’] = code</p>

<p>        update.message.reply_markdown(</p>

<p>                resolve(‘setcountry_success’, lang(update), api.countries[code][‘name’]))</p>

<p>        return ConversationHandler.END</p>

<p>    else:</p>

<p>        update.message.reply_text(resolve(‘unknown_place’, lang(update)))</p>

<p>def handle_setcountry_cancel(update, context):</p>

<p>    update.message.reply_text(resolve(‘cancel’, lang(update)))</p>

<p>    return ConversationHandler.END</p>

<p>### Notification subscription ###</p>

<p>@handler_decorator</p>

<p>def command_subscribe(update, context):</p>

<p>    if not ’subscribers’ in context.bot_data:</p>

<p>        context.bot_data[‘subscribers’] = [update.message.chat.id]</p>

<p>    elif not update.message.chat.id in context.bot_data[‘subscribers’]:</p>

<p>        context.bot_data[‘subscribers’].append(update.message.chat.id)</p>

<p>    update.message.reply_markdown(resolve(‘subscribe’, lang(update)))</p>

<p>@handler_decorator</p>

<p>def command_unsubscribe(update, context):</p>

<p>    if ’subscribers’ in context.bot_data:</p>

<p>        if update.message.chat.id in context.bot_data[‘subscribers’]:</p>

<p>            context.bot_data[‘subscribers’].remove(update.message.chat.id)</p>

<p>    update.message.reply_markdown(resolve(‘unsubscribe’, lang(update)))</p>

<p># runs the status notification job once per day</p>

<p>def run_notify(context):</p>

<p>    if not ’subscribers’ in context.bot_data:</p>

<p>        logger.warn(“No subscribers list specified.”)</p>

<p>        return</p>

<p>    count = 0</p>

<p>    for chat_id in context.bot_data[‘subscribers’]:</p>

<p>        try:</p>

<p>            country_code = context.dispatcher.chat_data[chat_id].get(‘country’, None)</p>

<p>            text = get_status_report(country_code=country_code) # TODO always English</p>

<p>            context.bot.send_message(chat_id=chat_id, text=text, parse_mode=ParseMode.MARKDOWN)</p>

<p>            count+=1</p>

<p>            sleep(0.05) # try to avoid flood limits</p>

<p>        except Exception as ex:</p>

<p>            # remove user from subscribers if he blocked or kicked the bot</p>

<p>            if isinstance(ex, TelegramError) and ex.message.startswith(“Forbidden: ”):</p>

<p>                context.bot_data[‘subscribers’].remove(chat_id)</p>

<p>            logger.error(“Failed to send daily notification to {}”.format(chat_id), exc_info=True)</p>

<p>    logger.info(“Successfully sent daily notification to {} users.”.format(count))</p>

<p>def error(update, context):</p>

<p>    try:</p>

<p>        raise context.error</p>

<p>    except TelegramError:</p>

<p>        logger.warning(‘Update {} caused error ”{}”‘.format(update, context.error))</p>

<p>def main(config):</p>

<p>    persistence = PicklePersistence(“database.pkl”)</p>

<p>    updater = Updater(config[‘token’], persistence=persistence, use_context=True)</p>

<p>    # add commands</p>

<p>    dp = updater.dispatcher</p>

<p>    dp.add_handler(CommandHandler(“start”, command_start))</p>

<p>    dp.add_handler(CommandHandler(“help”, command_help))</p>

<p>    dp.add_handler(CommandHandler(“faqs”, command_faqs))</p>

<p>    dp.add_handler(CommandHandler(“donate”, command_donate))</p>

<p>    dp.add_handler(CommandHandler(“today”, command_today))</p>

<p>    dp.add_handler(CommandHandler(“world”, command_world))</p>

<p>    dp.add_handler(CommandHandler(“list”, command_list))</p>

<p>    # callbacks for page buttons in list</p>

<p>    dp.add_handler(CallbackQueryHandler(callback_list_pages, pattern=r”list (-?\d+) (\d+)”))</p>

<p>    dp.add_handler(CallbackQueryHandler(callback_list_order_menu, pattern=r”list_order_menu (\d+) \(([\d\s]+)\)”))</p>

<p>    dp.add_handler(CallbackQueryHandler(callback_list_order, pattern=r”list_order (\w+) (\d+)”))</p>

<p>    # for every country, add a command for the iso2 and iso3 codes and the name</p>

<p>    for iso, country in api.countries.items():</p>

<p>        callback = lambda update, context, code=iso: command_country(update, context, code)</p>

<p>        dp.add_handler(CommandHandler(iso, callback))</p>

<p>        if country[‘iso3’]:</p>

<p>            dp.add_handler(CommandHandler(country[‘iso3’], callback))</p>

<p>        name_normal = re.sub(r”[^a-z]”, ”_”, country[‘name’].lower())</p>

<p>        dp.add_handler(CommandHandler(name_normal, callback))</p>

<p>    # country detailed button callback</p>

<p>    dp.add_handler(CallbackQueryHandler(callback_stats, pattern=r”stats (\w+) (\d)”))</p>

<p>    # set country (this has to be added before the free text handler)</p>

<p>    dp.add_handler(ConversationHandler(</p>

<p>        entry_points=[CommandHandler(“setcountry”, handle_setcountry_start)],</p>

<p>        states={</p>

<p>            1: [MessageHandler(Filters.text &amp; ~Filters.command, handle_setcountry_input)]</p>

<p>        },</p>

<p>        fallbacks=[CommandHandler(“cancel”, handle_setcountry_cancel)],</p>

<p>        conversation_timeout=60*10 # = 10 minutes</p>

<p>    ))</p>

<p>    # subscription</p>

<p>    dp.add_handler(CommandHandler(“subscribe”, command_subscribe))</p>

<p>    dp.add_handler(CommandHandler(“unsubscribe”, command_unsubscribe))</p>

<p>    # subscription job</p>

<p>    job_queue = updater.job_queue</p>

<p>    if ’notify_time’ in config:</p>

<p>        job_queue.run_daily(run_notify, datetime.strptime(config[‘notify_time’], ’%H:%M’).time())</p>

<p>    # free text input</p>

<p>    dp.add_handler(MessageHandler(Filters.text &amp; ~Filters.command, handle_text))</p>

<p>    dp.add_handler(InlineQueryHandler(handle_inlinequery))</p>

<p>    dp.add_error_handler(error)</p>

<p>    # start the bot</p>

<p>    updater.start_polling()</p>

<p>    updater.idle()</p>

<p>if __name__ == ”__main__”:</p>

<p>    with open(CONFIG_FILE, ’r’) as f:</p>

<p>        config = json.load(f)</p>

<p>    main(config)</p>

<h2 id="b4-json-code-containing-bot-token-and-timer">B4 JSON CODE CONTAINING BOT TOKEN AND TIMER</h2>

<p>{</p>

<p>    ”token”: ”1098397543:pJm4JTpTTI_l7o5IasqeCj7qw”,</p>

<p>    ”notify_time”: ”17:00”</p>

<p>}</p>

  </div><a class="u-url" href="/blog/2020/08/24/MIKE-OWINO-DOCUMENTATION.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>My easy to use blogging platform.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/MikeOwino" title="MikeOwino"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/mikeeowino" title="mikeeowino"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
